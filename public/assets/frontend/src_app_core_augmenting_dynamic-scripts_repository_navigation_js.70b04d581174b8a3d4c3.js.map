{"version":3,"mappings":"yKA4BA,SAuHCA,QAtHD,WACA,sCACAC,oBACAC,4BACAC,+BACAC,WACAC,+BACAC,+BAEAC,aACAH,qBACAH,WACAG,uBAOAC,OACAG,UAOAJ,yBACA,cACAI,eACAD,MAMAC,2BACA,eACAD,MAMA,oBAuBA,cACAE,yCACA,cACAC,oBACAC,KAGAD,SACAA,kCAGAE,gCACAA,4DAMA,cACAH,yCACA,cACAC,SACAA,gDACAG,KAGAH,kCAGAE,gCACAA,8DApDAH,wCACA,cACAC,0BACAI,QAwDA,YACA,2BACAH,MACA,GACUC,sBACVC,MACA,IAEAD,uBA9DAG,MACAD,sBACAE,QACAC,kBACAC,oBACAJ,WACAA,yBACAA,0BACAA","names":["jQuery","f","i","r","o","u","h","d","l","t","s","c","e","p","n","g","a","url","success"],"sources":["./src/app/core/augmenting/dynamic-scripts/repository_navigation.js"],"sourcesContent":["//-- copyright\n// OpenProject is an open source project management software.\n// Copyright (C) 2012-2022 the OpenProject GmbH\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License version 3.\n//\n// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:\n// Copyright (C) 2006-2013 Jean-Philippe Lang\n// Copyright (C) 2010-2013 the ChiliProject Team\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// See COPYRIGHT and LICENSE files for more details.\n//++\n\n(function($) {\n  $(function() {\n    var revision = $('#revision-identifier-input'),\n        form = revision.closest('form'),\n        tag = $('#revision-tag-select'),\n        branch = $('#revision-branch-select'),\n        selects = tag.add(branch),\n        branch_selected = branch.length > 0 && revision.val() == branch.val(),\n        tag_selected = tag.length > 0 && revision.val() == tag.val();\n\n    var sendForm = function() {\n      selects.prop('disable', true);\n      form.submit();\n      selects.prop('disable', false);\n    };\n\n    /*\n    If we're viewing a tag or branch, don't display it in the\n    revision box\n    */\n    if (branch_selected || tag_selected) {\n      revision.val('');\n    }\n\n    /*\n    Copy the branch/tag value into the revision box, then disable\n    the dropdowns before submitting the form\n    */\n    selects.on('change', function() {\n      var select = $(this);\n      revision.val(select.val());\n      sendForm();\n    });\n\n    /*\n    Disable the branch/tag dropdowns before submitting the revision form\n    */\n    revision.on('keydown', function(e) {\n      if (e.keyCode == 13) {\n        sendForm();\n      }\n    });\n\n\n    // Dir expanders\n    var repoBrowser = $('#browser');\n    repoBrowser.on('click', '.dir-expander', function() {\n      var el = $(this),\n          id = $(this).data('element'),\n          content = $(id);\n\n          if (expandDir(content)) {\n            content.addClass('loading');\n            $.ajax({\n              url: el.data('url'),\n              success: function(response) {\n                content.after(response);\n                content.removeClass('loading');\n                content.addClass('loaded open');\n                content.find('a.dir-expander')[0].title = I18n.t('js.label_collapse');\n              }\n            });\n          }\n    });\n\n    /**\n     * Collapses a directory listing in the repository module\n     */\n    function collapseScmEntry(content) {\n      repoBrowser.find('.' + content.attr('id')).each(function() {\n        var el = $(this);\n        if (el.hasClass('open')) {\n          collapseScmEntry(el);\n        }\n\n        el.hide();\n        el.toggleClass('open collapsed');\n      });\n\n      content.toggleClass('open collapsed')\n      content.find('a.dir-expander')[0].title = I18n.t('js.label_expand');\n    }\n\n    /**\n     * Expands an SCM entry if its loaded\n     */\n    function expandScmEntry(content) {\n      repoBrowser.find('.' + content.attr('id')).each(function() {\n        var el = $(this);\n        el.show();\n        if (el.hasClass('loaded') && !el.hasClass('collapsed')) {\n          expandScmEntry(el);\n        }\n\n        el.toggleClass('open collapsed')\n      });\n\n      content.toggleClass('open collapsed')\n      content.find('a.dir-expander')[0].title = I18n.t('js.label_collapse');\n    }\n\n    /**\n     * Determines whether a dir-expander should load content\n     * or simply expand already loaded content.\n     */\n    function expandDir(content) {\n        if (content.hasClass('open')) {\n            collapseScmEntry(content);\n            return false;\n        } else if (content.hasClass('loaded')) {\n            expandScmEntry(content);\n            return false;\n        }\n        if (content.hasClass('loading')) {\n            return false;\n        }\n        return true;\n    }\n  });\n}(jQuery));\n\n"],"sourceRoot":"webpack:///","file":"src_app_core_augmenting_dynamic-scripts_repository_navigation_js.70b04d581174b8a3d4c3.js"}