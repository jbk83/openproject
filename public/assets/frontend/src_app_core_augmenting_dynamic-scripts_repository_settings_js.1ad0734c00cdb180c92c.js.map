{"version":3,"mappings":"uKA4BAA,mBACA,oBACA,IACAC,MADAC,uBACA,MACAC,qCACAC,YAOAD,EACAE,qBACAC,oBACAH,SAEAC,EACAC,qBACAE,8BACAD,oBACAF,UAIAF,oDACA,cACAM,6BAA+CC,qBAE/CC,oCAGAR,8BACAS,mBAEA,WACAV,wBACAE,2BACAC,2CACAQ,OAGAR,kBAGA,6CACAS,YACAC,aAIAd,6CACAU,6BACAK,mDACS,OAITZ,yBACAW","names":["jQuery","a","e","o","s","find","prop","not","t","scm_vendor","window","each","i","u","c","document"],"sources":["./src/app/core/augmenting/dynamic-scripts/repository_settings.js"],"sourcesContent":["//-- copyright\n// OpenProject is an open source project management software.\n// Copyright (C) 2012-2022 the OpenProject GmbH\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License version 3.\n//\n// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:\n// Copyright (C) 2006-2013 Jean-Philippe Lang\n// Copyright (C) 2010-2013 the ChiliProject Team\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// See COPYRIGHT and LICENSE files for more details.\n//++\n\njQuery(function($){\n  var toggleContent = function(content,selected) {\n    var vendor = $('#scm_vendor').val(),\n      targetName = '#' + vendor + '-' + selected,\n      oldTargets = content.find('.attributes-group').not(targetName);\n    var newTarget  = jQuery(targetName);\n\n    // would work with fieldset#disabled, but that's bugged up unto IE11\n    // https://connect.microsoft.com/IE/feedbackdetail/view/962368/\n    //\n    // Ugly workaround: disable all inputs manually, but\n    // spare enabling inputs marked with `aria-disabled`\n    oldTargets\n      .find('input,select')\n      .prop('disabled', true);\n    oldTargets.hide();\n\n    newTarget\n      .find('input,select')\n      .not('[aria-disabled=\"true\"]')\n      .prop('disabled', false);\n    newTarget.show();\n  };\n\n  // Submit form when\n  $('.repositories--remote-select').change(function() {\n    var select = $(this);\n    var url = URI(select.data('url')).search({ scm_vendor: select.val() });\n\n    window.location.href = url.toString();\n  });\n\n  $(\"[data-switch='scm_type']\")\n    .each(function(_i, el) {\n\n      var fs = $(el),\n        name = fs.attr('data-switch'),\n        switches = fs.find('[name=\"' + name + '\"]'),\n        headers = fs.find('.attributes-group--header-text'),\n        content = $(el);\n\n      // Focus on first header\n      headers.first().focus();\n\n      // Open content if there is only one possible selection\n      var checkedInput = jQuery('input[name=scm_type]:checked');\n      if(checkedInput.length > 0) {\n        toggleContent(content, checkedInput.val());\n      }\n\n      // Necessary for accessibility purpose\n      jQuery('#scm_vendor').on('change', function(){\n        window.setTimeout(function(){\n          document.getElementsByName('scm_type')[0].focus();\n        }, 500);\n      });\n\n      // Toggle content\n      switches.on('change', function() {\n        toggleContent(content, this.value);\n      });\n    });\n});\n\n"],"sourceRoot":"webpack:///","file":"src_app_core_augmenting_dynamic-scripts_repository_settings_js.1ad0734c00cdb180c92c.js"}