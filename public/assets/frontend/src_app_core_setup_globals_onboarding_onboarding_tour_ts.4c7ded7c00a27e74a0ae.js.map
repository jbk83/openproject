{"version":3,"mappings":"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","names":["i","a","f","e","o","_","l","window","onStart","onEnd","onSkip","onNext","r","d","$body","m","n","K","overflow","w","h","k","setTimeout","P","offset","u","D","W","v","b","p","T","M","I","B","j","C","x","y","G","enjoyHintElementSelector","center_x","center_y","text","top","bottom","left","right","margin","scroll","g","onNextClick","onSkipClick","CanvasRenderingContext2D","s","this","init","resetComponentStuff","animation_time","chooser","enjoy_hint","hide","disable_events_element","btn","skip_btn","close_btn","next_btn","main_canvas","main_svg","svg_wrapper","svg_transparent","kinetic_container","class","appendTo","id","style","container","width","height","scaleX","fill","F","console","radius","sceneFunc","Y","O","E","push","z","H","N","X","L","S","U","A","J","et","Math","replace","node","duration","play","R","conn","Q","label","css","html","jQuery","event","remove","it","q","mt","yt","lt","wt","St","bt","xt","Ct","kt","Dt","Mt","ft","Z","Ft","It","Gt","Lt","tt","pt","vt","Nt","Rt","gt","Tt","At","jt","x_from","y_from","x_to","y_to","by_top_side","set","show","hide_next","show_next","hide_skip","show_skip","render_circle","render_label","render_label_with_shape","redo_events_near_rect","clear","close","t","version","names","shapes","listenClickTap","Node","Shape","Container","Stage","BaseLayer","Layer","FastLayer","Group","isDragging","isDragReady","_addId","_removeId","_addName","_removeName","_id","getAngle","_parseUA","browser","UA","global","copy","point","translate","scale","rotate","getTranslation","skew","multiply","invert","getMatrix","setAbsolutePosition","aqua","_isElement","_isFunction","_isObject","_isArray","Object","_isNumber","_isString","_throttle","_hasMethods","createCanvasElement","isBrowser","_isInDocument","_simplifyArray","_getImage","putImageData","_getRGBAString","_rgbToHex","_hexToRgb","getRandomColor","get","getRGB","_merge","cloneObject","cloneArray","_degToRad","_radToDeg","_capitalize","error","warn","extend","addMethods","_getControlPoints","_expandPoints","_removeLastLetter","pixelRatio","getContext","getPixelRatio","setPixelRatio","setWidth","setHeight","getWidth","getHeight","setSize","toDataURL","fillShape","strokeShape","fillStrokeShape","getTrace","clearTrace","_trace","reset","getCanvas","_applyLineCap","_applyOpacity","_applyLineJoin","setAttr","arc","beginPath","bezierCurveTo","clearRect","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","drawImage","fillText","getImageData","lineTo","moveTo","rect","quadraticCurveTo","restore","save","setLineDash","setTransform","stroke","strokeText","transform","_enableTrace","method","property","_fillColor","red","_fillPattern","_fillLinearGradient","_fillRadialGradient","_fill","_stroke","_applyShadow","addGetterSetter","addGetter","addSetter","addComponentsGetterSetter","c","addOverloadedGetterSetter","backCompat","afterSetFilter","RGBComponent","alphaComponent","_init","_clearCache","_getCache","_clearSelfAndDescendantCache","clearCache","cache","scene","_drawCachedSceneCanvas","_getCachedSceneCanvas","_drawCachedHitCanvas","on","name","off","dispatchEvent","target","addEventListener","removeEventListener","destroy","getAttr","getAncestors","getAttrs","setAttrs","isListening","_isListening","isVisible","_isVisible","shouldDrawHit","getZIndex","getAbsoluteZIndex","getDepth","setPosition","getPosition","getAbsolutePosition","_setTransform","_clearTransform","move","_eachAncestorReverse","moveToTop","moveUp","moveDown","moveToBottom","setZIndex","getAbsoluteOpacity","_getAbsoluteOpacity","toObject","toJSON","getParent","getLayer","getStage","_getStage","fire","getAbsoluteTransform","_getAbsoluteTransform","getTransform","_getTransform","clone","mimeType","toImage","getSize","getClassName","getType","getDragDistance","_get","_off","_fireChangeEvent","oldVal","setId","setName","_setAttr","_setComponentAttr","_fireAndBubble","_fire","draw","rotateDeg","polarCenterX","polarRotation","time","setLayers","getLayers","addLayer","isRunning","start","stop","_updateFrameObject","_animationLoop","_addAttr","_tweenFunc","_addListeners","reverse","seek","pause","finish","setTime","getTime","update","onEnterFrame","getTimer","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","Linear","anim","type","_endDragBefore","_endDragAfter","dragEndNode","__init","getChildren","hasChildren","removeChildren","destroyChildren","add","child","find","_getNodeById","_getNodesByName","_getDescendants","isAncestorOf","getAllIntersections","_setChildrenIndices","drawScene","drawHit","_drawChildren","hasShadow","_hasShadow","hasFill","hasStroke","intersects","_useBufferCanvas","drawHitFromCache","dashArray","___init","_validateAdd","setContainer","getPointerPosition","getContent","nt","getIntersection","_resizeDOM","_bindContentEvents","_mouseover","evt","_mouseout","_mousemove","_mousedown","_mouseup","_touchstart","_touchend","_touchmove","_DOMMouseScroll","_mousewheel","_wheel","_setPointerPosition","_getContentPosition","_buildDOM","_onContent","createPNGStream","getHitCanvas","clearHitCache","____init","_setCanvasSize","shape","_getImageData","_getIntersection","antialiased","_applyTransform","setVisible","enableHitGraph","disableHitGraph","hitGraphEnabled","_sceneFunc","setRadius","setOuterRadius","angleDeg","_hitFunc","setText","getTextWidth","getTextHeight","_getTextSize","_getContextFont","_addTextLine","_getTextWidth","_setTextData","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","_setInterval","_updateIndex","index","split","command","pathLength","transposeX","getText","getTag","_sync","ht","ot","V","axis","onAfter","queue","I18n","showSkip","nextButton","click","containerClass","timeout","Promise","condition","document","getElementsByClassName","length","Array","from","nextElementSibling","innerText","onboardingTourInstance","EnjoyHint","addClass","sessionStorage","setItem","removeClass","unbind","each","run","attr","hasClass","concat","querySelector","event_type","selector","description","skipButton","className","clickable","onBeforeStart","trigger","location","href","bind"],"sources":["./src/vendor/enjoyhint.js","./src/app/core/setup/globals/onboarding/tours/boards_tour.ts","./src/app/core/setup/globals/onboarding/onboarding_tour.ts","./src/app/core/setup/globals/onboarding/tours/work_package_tour.ts","./src/app/core/setup/globals/onboarding/tours/team_planners_tour.ts","./src/app/core/setup/globals/onboarding/tours/menu_tour.ts","./src/app/core/setup/globals/onboarding/tours/backlogs_tour.ts","./src/app/core/setup/globals/onboarding/tours/homescreen_tour.ts"],"sourcesContent":["(function ($) {\n    window.EnjoyHint = function (_options) {\n        var $event_element;\n        var that = this;\n\n        var defaults = {\n\n            onStart: function () {\n\n            },\n\n            onEnd: function () {\n\n            },\n\n            onSkip: function () {\n\n            },\n\n            onNext: function () {\n\n            }\n        };\n\n        var options = $.extend(defaults, _options);\n        var data = [];\n        var current_step = 0;\n\n        $body = $('body');\n\n\n        /********************* PRIVATE METHODS ***************************************/\n\n        var init = function () {\n\n            if ($('.enjoyhint')) {\n\n                $('.enjoyhint').remove();\n            }\n\n            $body.css({'overflow':'hidden'});\n            $body.addClass('enjoyhint-tutorial');\n\n            $(document).on(\"touchmove\",lockTouch);\n\n            $body.enjoyhint({\n\n                onNextClick: function () {\n\n                    if (data[current_step].onNext && typeof data[current_step].onNext === 'function') {\n                        data[current_step].onNext();\n                    }\n\n                    nextStep();\n                },\n\n                onSkipClick: function () {\n\n                    options.onSkip();\n                    skipAll();\n                }\n            });\n        };\n\n        var lockTouch = function(e) {\n\n            e.preventDefault();\n        };\n\n        var destroyEnjoy = function () {\n\n            $('.enjoyhint').remove();\n            $body.css({'overflow':'auto'});\n            $body.removeClass('enjoyhint-tutorial');\n            $(document).off(\"touchmove\", lockTouch);\n        };\n\n        that.clear = function(){\n\n            var $nextBtn = $('.enjoyhint_next_btn');\n            var $skipBtn = $('.enjoyhint_skip_btn');\n\n            $nextBtn.removeClass(that.nextUserClass);\n            $nextBtn.text(\"Next\");\n            $skipBtn.removeClass(that.skipUserClass);\n            $skipBtn.text(\"Skip\");\n        };\n\n        var stepAction = function () {\n\n            if (!(data && data[current_step])) {\n\n                $body.enjoyhint('hide');\n                options.onEnd();\n                destroyEnjoy();\n                return;\n            }\n\n            options.onNext();\n\n            var $enjoyhint = $('.enjoyhint');\n            var step_data = data[current_step];\n\n            // If the condition for the step is not fullfilled, skip it\n            if (step_data.condition && !step_data.condition()) {\n              current_step++;\n              stepAction();\n              return;\n            }\n\n            // Remove all classes\n            $enjoyhint.removeClass();\n            $enjoyhint.addClass(\"enjoyhint enjoyhint-step-\" + (current_step + 1));\n            if (step_data.clickable) $enjoyhint.addClass('-clickable');\n            if (step_data.containerClass) $enjoyhint.addClass(step_data.containerClass);\n\n\n            if (step_data.onBeforeStart && typeof step_data.onBeforeStart === 'function') {\n\n                step_data.onBeforeStart();\n            }\n\n            // Allow a wait function in as timout parameter\n            if(step_data.timeout && typeof step_data.timeout === 'function') {\n                step_data.timeout().then(function() {\n                    toggleNext();\n                })\n            } else {\n                var timeout = step_data.timeout || 0;\n                setTimeout(function () {\n                    toggleNext();\n                }, timeout);\n            }\n\n            function toggleNext() {\n                if (!step_data.selector) {\n\n                    for (var prop in step_data) {\n\n                        if (step_data.hasOwnProperty(prop) && prop.split(\" \")[1]) {\n\n                            step_data.selector = prop.split(\" \")[1];\n                            step_data.event = prop.split(\" \")[0];\n\n                            if (prop.split(\" \")[0] == 'next' || prop.split(\" \")[0] == 'auto' || prop.split(\" \")[0] == 'custom') {\n\n                                step_data.event_type = prop.split(\" \")[0];\n                            }\n\n                            step_data.description = step_data[prop];\n                        }\n                    }\n                }\n\n                setTimeout(function () {\n\n                    that.clear();\n                }, 250);\n\n                $(document.body).scrollTop(step_data.selector, step_data.scrollAnimationSpeed || 250, {offset: -100});\n\n                setTimeout(function () {\n\n                    var $element = $(step_data.selector);\n                    var event = makeEventName(step_data.event);\n\n                    $body.enjoyhint('show');\n                    $body.enjoyhint('hide_next');\n                    $event_element = $element;\n\n                    if (step_data.event_selector) {\n\n                        $event_element = $(step_data.event_selector);\n                    }\n\n                    if (!step_data.event_type && step_data.event == \"key\") {\n\n                        $element.keydown(function (event) {\n\n                            if (event.which == step_data.keyCode) {\n\n                                current_step++;\n                                stepAction();\n                            }\n                        });\n                    }\n\n                    if (step_data.showNext == true) {\n\n                        $body.enjoyhint('show_next');\n                    }\n\n                    if (step_data.showSkip == false) {\n\n                        $body.enjoyhint('hide_skip');\n                    } else {\n\n                        $body.enjoyhint('show_skip');\n                    }\n\n                    if (step_data.showSkip == true) {\n\n                    }\n\n                    if (step_data.nextButton) {\n\n                        var $nextBtn = $('.enjoyhint_next_btn');\n\n                        $nextBtn.addClass(step_data.nextButton.className || \"\");\n                        $nextBtn.text(step_data.nextButton.text || \"Next\");\n                        that.nextUserClass = step_data.nextButton.className;\n                    }\n\n                    if (step_data.skipButton) {\n\n                        var $skipBtn = $('.enjoyhint_skip_btn');\n\n                        $skipBtn.addClass(step_data.skipButton.className || \"\");\n                        $skipBtn.text(step_data.skipButton.text || \"Skip\");\n                        that.skipUserClass = step_data.skipButton.className;\n                    }\n\n                    if (step_data.event_type) {\n\n                        switch (step_data.event_type) {\n\n                            case 'auto':\n\n                                $element[step_data.event]();\n\n                                switch (step_data.event) {\n\n                                    case 'click':\n                                        break;\n                                }\n\n                                current_step++;\n                                stepAction();\n\n                                return;\n                                break;\n\n                            case 'custom':\n\n                                on(step_data.event, function () {\n\n                                    current_step++;\n                                    off(step_data.event);\n                                    stepAction();\n                                });\n\n                                break;\n\n                            case 'next':\n\n                                $body.enjoyhint('show_next');\n                                break;\n                        }\n\n                    } else {\n\n                        $event_element.on(event, function (e) {\n\n                            if (step_data.keyCode && e.keyCode != step_data.keyCode) {\n\n                                return;\n                            }\n\n                            current_step++;\n                            $(this).off(event);\n\n                            stepAction(); // clicked\n                        });\n                    }\n\n                    var max_habarites = Math.max($element.outerWidth(), $element.outerHeight());\n                    var radius = step_data.radius || Math.round(max_habarites / 2) + 5;\n                    var offset = $element.offset();\n                    var w = $element.outerWidth();\n                    var h = $element.outerHeight();\n                    var shape_margin = (step_data.margin !== undefined) ? step_data.margin : 10;\n\n                    var coords = {\n                        x: offset.left + Math.round(w / 2),\n                        y: offset.top + Math.round(h / 2) - $(document).scrollTop()\n                    };\n\n                    var shape_data = {\n                        enjoyHintElementSelector: step_data.selector,\n                        center_x: coords.x,\n                        center_y: coords.y,\n                        text: step_data.description,\n                        top: step_data.top,\n                        bottom: step_data.bottom,\n                        left: step_data.left,\n                        right: step_data.right,\n                        margin: step_data.margin,\n                        scroll: step_data.scroll\n                    };\n\n                    if (step_data.shape && step_data.shape == 'circle') {\n\n                        shape_data.shape = 'circle';\n                        shape_data.radius = radius;\n                    } else {\n\n                        shape_data.radius = 0;\n                        shape_data.width = w + shape_margin;\n                        shape_data.height = h + shape_margin;\n                    }\n\n                    $body.enjoyhint('render_label_with_shape', shape_data, that.stop);\n                }, step_data.scrollAnimationSpeed + 20 || 270);\n            }\n        };\n\n        var nextStep = function() {\n\n            current_step++;\n            stepAction();\n        };\n\n        var skipAll = function() {\n\n            var step_data = data[current_step];\n            var $element = $(step_data.selector);\n\n            off(step_data.event);\n            $element.off(makeEventName(step_data.event));\n\n            destroyEnjoy();\n        };\n\n        var makeEventName = function (name, is_custom) {\n\n            return name + (is_custom ? 'custom' : '') + '.enjoy_hint';\n        };\n\n        var on = function (event_name, callback) {\n\n            $body.on(makeEventName(event_name, true), callback);\n        };\n\n        var off = function (event_name) {\n\n            $body.off(makeEventName(event_name, true));\n        };\n\n\n        /********************* PUBLIC METHODS ***************************************/\n\n        window.addEventListener('resize', function() {\n\n            if ($event_element != null) {\n\n                $body.enjoyhint('redo_events_near_rect', $event_element[0].getBoundingClientRect());\n            }\n        });\n\n        that.stop = function() {\n\n            skipAll();\n        };\n\n        that.reRunScript = function(cs) {\n\n            current_step = cs;\n            stepAction();\n        };\n\n        that.runScript = function () {\n\n            current_step = 0;\n            options.onStart();\n            stepAction();\n        };\n\n        that.resumeScript = function () {\n\n            stepAction();\n        };\n\n        that.setCurrentStep = function(cs) {\n\n            current_step = cs;\n        };\n\n        that.getCurrentStep = function () {\n\n            return current_step;\n        };\n\n        that.trigger = function (event_name) {\n\n            switch (event_name) {\n\n                case 'next':\n\n                    nextStep();\n                    break;\n\n                case 'skip':\n\n                    skipAll();\n                    break;\n            }\n        };\n\n        that.setScript = function (_data) {\n\n            if (_data) {\n\n                data = _data;\n            }\n        };\n\n        //support deprecated API methods\n        that.set = function (_data) {\n\n            that.setScript(_data);\n        };\n\n        that.setSteps = function (_data) {\n\n            that.setScript(_data);\n        };\n\n        that.run = function () {\n\n            that.runScript();\n        };\n\n        that.resume = function () {\n\n            that.resumeScript();\n        };\n\n        init();\n    };;CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {\n\n        if (w < 2 * r) r = w / 2;\n        if (h < 2 * r) r = h / 2;\n        this.beginPath();\n        this.moveTo(x + r, y);\n        this.arcTo(x + w, y, x + w, y + h, r);\n        this.arcTo(x + w, y + h, x, y + h, r);\n        this.arcTo(x, y + h, x, y, r);\n        this.arcTo(x, y, x + w, y, r);\n        this.closePath();\n        return this;\n    };\n\n    (function ($) {\n\n        var that;\n\n        var originalLabelLeft, originalLabelTop;\n        var originalArrowLeft, originalArrowTop;\n        var originalCenterX, originalCenterY;\n        var originalSkipbuttonLeft, originalSkipbuttonTop;\n        var prevWindowWidth, prevWindowHeight;\n        var originalWidth = window.innerWidth, originalHeight = window.innerHeight;\n\n        var methods = {\n\n            init: function (options) {\n\n                return this.each(function () {\n\n                    var defaults = {\n\n                        onNextClick: function () {\n\n                        },\n                        onSkipClick: function () {\n\n                        },\n\n                        animation_time: 800\n                    };\n\n                    this.enjoyhint_obj = {};\n                    that = this.enjoyhint_obj;\n\n                    that.resetComponentStuff = function() {\n\n                        originalLabelLeft = null;\n                        originalLabelTop = null;\n                        originalArrowLeft = null;\n                        originalArrowTop = null;\n                        originalCenterX = null;\n                        originalCenterY = null;\n                        originalSkipbuttonLeft = null;\n                        originalSkipbuttonTop = null;\n                        prevWindowWidth = null;\n                        prevWindowHeight = null;\n                        originalWidth = window.innerWidth;\n                        originalHeight = window.innerHeight;\n                    };\n\n\n                    var $that = $(this);\n                    that.options = jQuery.extend(defaults, options);\n\n                    //general classes\n                    that.gcl = {\n\n                        chooser: 'enjoyhint'\n                    };\n\n                    // classes\n                    that.cl = {\n\n                        enjoy_hint: 'enjoyhint',\n                        hide: 'enjoyhint_hide',\n                        disable_events_element: 'enjoyhint_disable_events',\n                        btn: 'enjoyhint_btn',\n                        skip_btn: 'enjoyhint_skip_btn',\n                        close_btn: 'enjoyhint_close_btn',\n                        next_btn: 'enjoyhint_next_btn',\n                        main_canvas: 'enjoyhint_canvas',\n                        main_svg: 'enjoyhint_svg',\n                        svg_wrapper: 'enjoyhint_svg_wrapper',\n                        svg_transparent: 'enjoyhint_svg_transparent',\n                        kinetic_container: 'kinetic_container'\n                    };\n\n                    function makeSVG(tag, attrs) {\n\n                        var el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\n                        for (var k in attrs) {\n\n                            el.setAttribute(k, attrs[k]);\n                        }\n\n                        return el;\n                    }\n\n\n                    // =======================================================================\n                    // ========================---- enjoyhint ----==============================\n                    // =======================================================================\n\n                    that.canvas_size = {\n\n                        w: $(window).width()*1.4,\n                        h: $(window).height()*1.4\n                    };\n\n                    var canvas_id = \"enj_canvas\";\n\n                    that.enjoyhint = $('<div>', {'class': that.cl.enjoy_hint + ' ' + that.cl.svg_transparent}).appendTo($that);\n                    that.enjoyhint_svg_wrapper = $('<div>', {'class': that.cl.svg_wrapper + ' ' + that.cl.svg_transparent}).appendTo(that.enjoyhint);\n                    that.$stage_container = $('<div id=\"' + that.cl.kinetic_container + '\">').appendTo(that.enjoyhint);\n                    that.$canvas = $('<canvas id=\"' + canvas_id + '\" width=\"' + that.canvas_size.w + '\" height=\"' + that.canvas_size.h + '\" class=\"' + that.cl.main_canvas + '\">').appendTo(that.enjoyhint);\n                    that.$svg = $('<svg width=\"' + that.canvas_size.w + '\" height=\"' + that.canvas_size.h + '\" class=\"' + that.cl.main_canvas + ' ' + that.cl.main_svg + '\">').appendTo(that.enjoyhint_svg_wrapper);\n\n                    var defs = $(makeSVG('defs'));\n                    var marker = $(makeSVG('marker', {id: \"arrowMarker\", viewBox: \"0 0 36 21\", refX: \"21\", refY: \"10\", markerUnits: \"strokeWidth\", orient: \"auto\", markerWidth: \"16\", markerHeight: \"12\"}));\n                    var polilyne = $(makeSVG('path', {style: \"fill:none; stroke:rgb(255,255,255); stroke-width:2\", d: \"M0,0 c30,11 30,9 0,20\"}));\n\n                    defs.append(marker.append(polilyne)).appendTo(that.$svg);\n\n                    that.kinetic_stage = new Kinetic.Stage({\n                        container: that.cl.kinetic_container,\n                        width: that.canvas_size.w,\n                        height: that.canvas_size.h,\n                        scaleX: 1\n                    });\n\n                    that.layer = new Kinetic.Layer();\n                    that.rect = new Kinetic.Rect({\n                        fill: 'rgba(0,0,0,0.6)',\n                        width: that.canvas_size.w,\n                        height: that.canvas_size.h\n                    });\n\n                    var $top_dis_events = $('<div>', {'class': that.cl.disable_events_element}).appendTo(that.enjoyhint);\n                    var $bottom_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n                    var $left_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n                    var $right_dis_events = $top_dis_events.clone().appendTo(that.enjoyhint);\n\n                    var stopPropagation = function(e) {\n\n                        e.stopImmediatePropagation();\n                    };\n\n                    $(\"button\").focusout(stopPropagation);\n                    $top_dis_events.click(stopPropagation);\n                    $bottom_dis_events.click(stopPropagation);\n                    $left_dis_events.click(stopPropagation);\n                    $right_dis_events.click(stopPropagation);\n\n\n                    that.$skip_btn = $('<div>', {'class': that.cl.skip_btn}).appendTo(that.enjoyhint).html('Skip').click(function (e) {\n\n                        that.hide();\n                        that.options.onSkipClick();\n                    });\n                    that.$next_btn = $('<div>', {'class': that.cl.next_btn}).appendTo(that.enjoyhint).html('Next').click(function (e) {\n\n                        that.options.onNextClick();\n                    });\n\n                    that.$close_btn = $('<div>', {'class': that.cl.close_btn}).appendTo(that.enjoyhint).html('').click(function (e) {\n\n                        that.hide();\n                        that.options.onSkipClick();\n                    });\n\n                    that.$canvas.mousedown(function (e) {\n\n                        $('canvas').css({left: '4000px'});\n\n                        try {\n                          var BottomElement = document.elementFromPoint(e.clientX, e.clientY);\n                          $('canvas').css({left: '0px'});\n\n                          $(BottomElement).click();\n                        } catch (e) {\n                          console.error(\"Failed to click on element from point. \" + e);\n                        }\n\n                        return false;\n                    });\n\n\n                    var circle_r = 0;\n                    var shape_init_shift = 130;\n\n                    that.shape = new Kinetic.Shape({\n                        radius: circle_r,\n                        center_x: -shape_init_shift,\n                        center_y: -shape_init_shift,\n                        width: 0,\n                        height: 0,\n                        sceneFunc: function (context) {\n\n                            var ctx = this.getContext(\"2d\")._context;\n                            var pos = this.pos;\n                            var def_comp = ctx.globalCompositeOperation;\n                            ctx.globalCompositeOperation = 'destination-out';\n                            ctx.beginPath();\n\n                            var x = this.attrs.center_x - Math.round(this.attrs.width / 2);\n                            var y = this.attrs.center_y - Math.round(this.attrs.height / 2);\n                            ctx.roundRect(x, y, this.attrs.width, this.attrs.height, this.attrs.radius);\n                            ctx.fillStyle = \"red\";\n                            ctx.fill();\n\n                            ctx.globalCompositeOperation = def_comp;\n                        }\n                    });\n\n                    that.shape.radius = circle_r;\n                    that.layer.add(that.rect);\n                    that.layer.add(that.shape);\n                    that.kinetic_stage.add(that.layer);\n\n                    $(window).on('resize', function() {\n\n                        if (!($(that.stepData.enjoyHintElementSelector).is(\":visible\"))) {\n\n                            that.stopFunction();\n                            $(window).off('resize');\n                            return;\n                        }\n\n                        prevWindowWidth = window.innerWidth;\n                        prevWindowHeight = window.innerHeight;\n\n                        var boundingClientRect = $(that.stepData.enjoyHintElementSelector)[0].getBoundingClientRect();\n\n                        that.shape.attrs.center_x = Math.round(boundingClientRect.left + boundingClientRect.width / 2);\n                        that.shape.attrs.center_y = Math.round(boundingClientRect.top + boundingClientRect.height / 2);\n                        that.shape.attrs.width = boundingClientRect.width + 11;\n                        that.shape.attrs.height = boundingClientRect.height + 11;\n\n                        var newWidth = window.innerWidth;\n                        var newHeight = window.innerHeight;\n                        var scaleX = newWidth / originalWidth;\n                        var scaleY = newHeight / originalHeight;\n\n                        that.kinetic_stage.setAttr('width', originalWidth * scaleX);\n                        that.kinetic_stage.setAttr('height', originalHeight * scaleY);\n\n                        if (that.stepData != null) {\n\n                            prevWindowWidth = window.innerWidth;\n                            prevWindowHeight = window.innerHeight;\n\n\n                            /* Init */\n\n                            if (!originalCenterX) {\n\n                                originalCenterX = that.shape.attrs.center_x;\n                                originalCenterY = that.shape.attrs.center_y;\n                            }\n\n                            if (!originalArrowLeft) {\n\n                                originalArrowLeft = [];\n                                var attr = $('#enjoyhint_arrpw_line').attr('d');\n                                originalArrowLeft.push(attr.substr(1).split(',')[0]);\n                                originalArrowLeft.push(attr.substr(attr.indexOf('Q') + 1).split(',')[0]);\n                                originalArrowLeft.push(attr.split(' ')[2].split(',')[0]);\n                                originalArrowTop = [];\n                                originalArrowTop.push(attr.split(',')[1].split(' ')[0]);\n                                originalArrowTop.push(attr.split(',')[2].split(' ')[0]);\n                                originalArrowTop.push(attr.split(',')[3]);\n                            }\n\n                            var labelElement = $('.enjoy_hint_label');\n\n                            if (!originalLabelLeft) {\n\n                                originalLabelLeft = labelElement[0].getBoundingClientRect().left;\n                                originalLabelTop = labelElement[0].getBoundingClientRect().top;\n                            }\n\n                            var skipButton = $('.enjoyhint_skip_btn');\n\n                            if (!originalSkipbuttonLeft) {\n\n                                originalSkipbuttonLeft = skipButton[0].getBoundingClientRect().left;\n                                originalSkipbuttonTop = skipButton[0].getBoundingClientRect().top;\n                            }\n\n\n                            /* Resizing label */\n\n                            labelElement.css('left', window.innerWidth / 2 - labelElement.outerWidth() / 2);\n\n\n                            /* Resizing arrow */\n\n                            var labelRect = labelElement[0].getBoundingClientRect();\n\n                            if (window.innerWidth < 640) {\n\n                                $('#enjoyhint_arrpw_line').hide();\n                                labelElement.css('top', window.innerHeight / 2 - labelElement.outerHeight() / 2);\n                            } else {\n\n                                $('#enjoyhint_arrpw_line').show();\n\n                                labelElement.css('top', originalLabelTop);\n\n                                var x1, x2, y1, y2;\n\n                                var labelLeftOfShape = labelRect.left + labelRect.width / 2 < that.shape.attrs.center_x;\n                                var labelAboveShape = labelRect.top + labelRect.height / 2 < that.shape.attrs.center_y;\n\n                                if (window.innerWidth < 900) {\n\n                                    x1 = Math.round(labelRect.left + (labelRect.width / 2 + 15) * (labelRect.left + labelRect.width / 2 < that.shape.attrs.center_x ? 1 : -1));\n                                    y1 = Math.round(labelRect.top + labelRect.height * (labelRect.top + labelRect.height / 2 < that.shape.attrs.center_y ? 1 : -1));\n                                    x2 = Math.round(that.shape.attrs.center_x + (that.shape.attrs.radius + 15) * (labelLeftOfShape ? -1 : 1));\n                                    y2 = Math.round(that.shape.attrs.center_y);\n                                } else {\n\n                                    x1 = Math.round((labelRect.left + (labelRect.width / 2)) + ((labelRect.width / 2 + 15) * (labelLeftOfShape ? 1 : -1)));\n                                    y1 = Math.round(labelRect.top + labelRect.height / 2);\n                                    x2 = Math.round(that.shape.attrs.center_x);\n                                    y2 = Math.round(that.shape.attrs.center_y + (((that.shape.attrs.height / 2) + 15) * (labelAboveShape ? -1 : 1)));\n                                }\n\n                                var midX = x1 + (x2 - x1) / 2;\n                                var midY = y1 + (y2 - y1) / 2;\n\n                                var bezX = x1 < x2 ? x2 : x1;\n                                var bezY = y1 < y2 ? y1 : y2;\n\n                                if (Math.abs(labelRect.left + labelRect.width / 2 - that.shape.attrs.center_x) < 200) {\n\n                                    x1 = x2 = labelRect.left + labelRect.width / 2;\n                                    y1 = labelRect.top;\n                                    bezX = x1;\n                                    bezY = y1;\n                                    console.log(\"ok\");\n                                }\n\n                                if (window.innerWidth < 900) {\n\n                                    bezX = x1 < x2 ? x1 : x2;\n                                    bezY = y1 < y2 ? y2 : y1;\n                                }\n\n                                var newCoordsLine = \"M%d1,%d2 Q%d3,%d4 %d5,%d6\"\n                                    .replace(\"%d1\", x1).replace(\"%d2\", y1)\n                                    .replace(\"%d3\", bezX).replace(\"%d4\", bezY)\n                                    .replace(\"%d5\", x2).replace(\"%d6\", y2);\n                                $('#enjoyhint_arrpw_line')[0].setAttribute('d', newCoordsLine);\n                            }\n\n\n                            /* Resizing skip button */\n\n                            var newSkipbuttonLeft = +originalSkipbuttonLeft + (that.shape.attrs.center_x - originalCenterX) / 2;\n                            skipButton.css('left', newSkipbuttonLeft < 15 ? 15 : newSkipbuttonLeft);\n                            skipButton.css('top', labelRect.top + labelRect.height + 20);\n                        }\n\n                        that.rect = new Kinetic.Rect({\n                            fill: 'rgba(0,0,0,0.6)',\n                            width: window.innerWidth,\n                            height: window.innerHeight\n                        });\n\n                        that.layer.removeChildren();\n                        that.layer.add(that.rect);\n                        that.layer.add(that.shape);\n                        that.layer.draw();\n                        that.kinetic_stage.draw();\n                    });\n\n                    var enjoyhint_elements = [\n                        that.enjoyhint,\n                        $top_dis_events,\n                        $bottom_dis_events,\n                        $left_dis_events,\n                        $right_dis_events\n                    ];\n\n                    that.show = function () {\n\n                        that.enjoyhint.removeClass(that.cl.hide);\n                    };\n\n                    that.hide = function () {\n\n                        that.enjoyhint.addClass(that.cl.hide);\n\n                        var tween = new Kinetic.Tween({\n                            node: that.shape,\n                            duration: 0.002,\n                            center_x: -shape_init_shift,\n                            center_y: -shape_init_shift\n                        });\n\n                        tween.play();\n                    };\n\n                    that.hide();\n\n                    that.hideNextBtn = function () {\n\n                        that.$next_btn.addClass(that.cl.hide);\n                        that.nextBtn = \"hide\";\n                    };\n\n                    that.showNextBtn = function () {\n\n                        that.$next_btn.removeClass(that.cl.hide);\n                        that.nextBtn = \"show\";\n                    };\n\n                    that.hideSkipBtn = function () {\n\n                        that.$skip_btn.addClass(that.cl.hide);\n                    };\n\n                    that.showSkipBtn = function () {\n\n                        that.$skip_btn.removeClass(that.cl.hide);\n                    };\n\n                    that.renderCircle = function (data) {\n\n                        var r = data.r || 0;\n                        var x = data.x || 0;\n                        var y = data.y || 0;\n\n                        var tween = new Kinetic.Tween({\n                            node: that.shape,\n                            duration: 0.2,\n                            center_x: x,\n                            center_y: y,\n                            width: r * 2,\n                            height: r * 2,\n                            radius: r\n                        });\n\n                        tween.play();\n\n                        var left = x - r;\n                        var right = x + r;\n                        var top = y - r;\n                        var bottom = y + r;\n                        var margin = 20;\n\n                        return {\n                            x: x,\n                            y: y,\n                            left: left,\n                            right: right,\n                            top: top,\n                            bottom: bottom,\n                            conn: {\n                                left: {\n                                    x: left - margin,\n                                    y: y\n                                },\n                                right: {\n                                    x: right + margin,\n                                    y: y\n                                },\n                                top: {\n                                    x: x,\n                                    y: top - margin\n                                },\n                                bottom: {\n                                    x: x,\n                                    y: bottom + margin\n                                }\n                            }\n                        };\n\n                    };\n\n                    that.renderRect = function (data, timeout) {\n\n                        var r = data.r || 0;\n                        var x = data.x || 0;\n                        var y = data.y || 0;\n                        var w = data.w || 0;\n                        var h = data.h || 0;\n                        var margin = 20;\n\n                        var tween = new Kinetic.Tween({\n                            node: that.shape,\n                            duration: timeout,\n                            center_x: x,\n                            center_y: y,\n                            width: w,\n                            height: h,\n                            radius: r\n                        });\n\n                        tween.play();\n\n                        var half_w = Math.round(w / 2);\n                        var half_h = Math.round(h / 2);\n                        var left = x - half_w;\n                        var right = x + half_w;\n                        var top = y - half_h;\n                        var bottom = y + half_h;\n\n                        return {\n                            x: x,\n                            y: y,\n                            left: left,\n                            right: right,\n                            top: top,\n                            bottom: bottom,\n                            conn: {\n                                left: {\n                                    x: left - margin,\n                                    y: y\n                                },\n                                right: {\n                                    x: right + margin,\n                                    y: y\n                                },\n                                top: {\n                                    x: x,\n                                    y: top - margin\n                                },\n                                bottom: {\n                                    x: x,\n                                    y: bottom + margin\n                                }\n                            }\n                        };\n                    };\n\n                    that.renderLabel = function (data) {\n\n                        var x = data.x || 0;\n                        that.originalElementX = x;\n                        var y = data.y || 0;\n                        var text = data.text || 0;\n\n                        var label = that.getLabelElement({\n                            x: x,\n                            y: y,\n                            text: data.text\n                        });\n\n                        var label_w = label.width();\n                        var label_h = label.height();\n                        var label_left = label.offset().left;\n                        var label_right = label.offset().left + label_w;\n                        var label_top = label.offset().top - $(document).scrollTop();\n                        var label_bottom = label.offset().top + label_h;\n\n                        var margin = 10;\n\n                        var conn_left = {\n                            x: label_left - margin,\n                            y: label_top + Math.round(label_h / 2)\n                        };\n\n                        var conn_right = {\n                            x: label_right + margin,\n                            y: label_top + Math.round(label_h / 2)\n                        };\n\n                        var conn_top = {\n                            x: label_left + Math.round(label_w / 2),\n                            y: label_top - margin\n                        };\n\n                        var conn_bottom = {\n                            x: label_left + Math.round(label_w / 2),\n                            y: label_bottom + margin\n                        };\n\n                        label.detach();\n\n                        setTimeout(function () {\n\n                            $('#enjoyhint_label').remove();\n                            label.appendTo(that.enjoyhint);\n                        }, that.options.animation_time / 2);\n\n                        return {\n                            label: label,\n                            left: label_left,\n                            right: label_right,\n                            top: label_top,\n                            bottom: label_bottom,\n                            conn: {\n                                left: conn_left,\n                                right: conn_right,\n                                top: conn_top,\n                                bottom: conn_bottom\n                            }\n\n                        };\n                    };\n\n                    that.renderArrow = function (data) {\n\n                        if (window.innerWidth >= 640) {\n\n                            var x_from = data.x_from || 0;\n                            var y_from = data.y_from || 0;\n                            var x_to = data.x_to || 0;\n                            var y_to = data.y_to || 0;\n                            var by_top_side = data.by_top_side;\n                            var control_point_x = 0;\n                            var control_point_y = 0;\n                            if (by_top_side) {\n\n                                if (y_from >= y_to) {\n\n                                    control_point_y = y_to;\n                                    control_point_x = x_from;\n                                } else {\n\n                                    control_point_y = y_from;\n                                    control_point_x = x_to;\n                                }\n                            } else {\n\n                                if (y_from >= y_to) {\n\n                                    control_point_y = y_from;\n                                    control_point_x = x_to;\n                                } else {\n\n                                    control_point_y = y_to;\n                                    control_point_x = x_from;\n                                }\n                            }\n                        }\n\n\n                        var text = data.text || '';\n                        that.enjoyhint.addClass(that.cl.svg_transparent);\n\n                        setTimeout(function () {\n\n                            $('#enjoyhint_arrpw_line').remove();\n\n                            var d = 'M' + x_from + ',' + y_from + ' Q' + control_point_x + ',' + control_point_y + ' ' + x_to + ',' + y_to;\n                            that.$svg.append(makeSVG('path', {style: \"fill:none; stroke:rgb(255,255,255); stroke-width:3\", 'marker-end': \"url(\" + location.href + \"#arrowMarker)\", d: d, id: 'enjoyhint_arrpw_line'}));\n                            that.enjoyhint.removeClass(that.cl.svg_transparent);\n\n                        }, that.options.animation_time / 2);\n                    };\n\n                    that.getLabelElement = function (data) {\n\n                        return $('<div>', {\"class\": 'enjoy_hint_label', id: 'enjoyhint_label'})\n                            .css({\n                                'top': data.y + 'px',\n                                'left': data.x + 'px'\n                            })\n                            .html(data.text).appendTo(that.enjoyhint);\n                    };\n\n\n                    that.disableEventsNearRect = function (rect) {\n\n                        $top_dis_events.css({\n                            top: '0',\n                            left: '0'\n                        }).height(rect.top);\n\n                        $bottom_dis_events.css({\n                            top: rect.bottom + 'px',\n                            left: '0'\n                        });\n\n                        $left_dis_events.css({\n                            top: '0',\n                            left: 0 + 'px'\n                        }).width(rect.left);\n\n                        $right_dis_events.css({\n                            top: '0',\n                            left: rect.right + 'px'\n                        });\n                    };\n\n                    (function($) {\n\n                        $.event.special.destroyed = {\n\n                            remove: function(o) {\n\n                                if (o.handler) {\n\n                                    o.handler()\n                                }\n                            }\n                        }\n                    })(jQuery);\n\n                    that.renderLabelWithShape = function (data) {\n\n                        that.stepData = data;\n\n                        function findParentDialog(element) {\n\n                            if (element.tagName === \"MD-DIALOG\") {\n\n                                return element;\n                            } else if (typeof element.tagName == \"undefined\") {\n\n                                return null;\n                            } else {\n\n                                return findParentDialog($(element).parent()[0]);\n                            }\n                        }\n\n                        var dialog = findParentDialog($(that.stepData.enjoyHintElementSelector)[0]);\n\n                        if (dialog != null) {\n\n                            $(dialog).on('dialogClosing', function() {\n\n                                that.stopFunction();\n                                return;\n                            });\n                        }\n\n                        that.resetComponentStuff();\n\n                        var shape_type = data.shape || 'rect';\n                        var shape_data = {};\n\n                        var half_w = 0;\n                        var half_h = 0;\n\n                        var shape_offsets = {\n                            top: data.top || 0,\n                            bottom: data.bottom || 0,\n                            left: data.left || 0,\n                            right: data.right || 0\n                        };\n\n                        switch (shape_type) {\n\n                            case 'circle':\n\n                                half_w = half_h = data.radius;\n\n                                var sides_pos = {\n                                    top: data.center_y - half_h + shape_offsets.top,\n                                    bottom: data.center_y + half_h - shape_offsets.bottom,\n                                    left: data.center_x - half_w + shape_offsets.left,\n                                    right: data.center_x + half_w - shape_offsets.right\n                                };\n\n                                var width = sides_pos.right - sides_pos.left;\n                                var height = sides_pos.bottom - sides_pos.top;\n                                data.radius = Math.round(Math.min(width, height) / 2);\n\n                                //new half habarites\n                                half_w = half_h = Math.round(data.radius / 2);\n\n                                var new_half_w = Math.round(width / 2);\n                                var new_half_h = Math.round(height / 2);\n\n                                //new center_x and center_y\n                                data.center_x = sides_pos.left + new_half_w;\n                                data.center_y = sides_pos.top + new_half_h;\n\n                                shape_data = that.renderCircle({\n                                    x: data.center_x,\n                                    y: data.center_y,\n                                    r: data.radius\n                                });\n\n                                break;\n\n                            case 'rect':\n\n                                half_w = Math.round(data.width / 2);\n                                half_h = Math.round(data.height / 2);\n\n                                var sides_pos = {\n                                    top: data.center_y - half_h + shape_offsets.top,\n                                    bottom: data.center_y + half_h - shape_offsets.bottom,\n                                    left: data.center_x - half_w + shape_offsets.left,\n                                    right: data.center_x + half_w - shape_offsets.right\n                                };\n\n                                data.width = sides_pos.right - sides_pos.left;\n                                data.height = sides_pos.bottom - sides_pos.top;\n\n                                half_w = Math.round(data.width / 2);\n                                half_h = Math.round(data.height / 2);\n\n                                //new center_x and center_y\n                                data.center_x = sides_pos.left + half_w;\n                                data.center_y = sides_pos.top + half_h;\n\n                                shape_data = that.renderRect({\n                                    x: data.center_x,\n                                    y: data.center_y,\n                                    w: data.width,\n                                    h: data.height,\n                                    r: data.radius\n                                }, 0.2);\n\n                                break;\n                        }\n\n                        var body_size = {\n                            w: that.enjoyhint.width(),\n                            h: that.enjoyhint.height()\n                        };\n\n                        var label = that.getLabelElement({\n                            x: 0,\n                            y: 0,\n                            text: data.text\n                        });\n\n                        var label_width = label.outerWidth();\n                        var label_height = label.outerHeight();\n                        label.remove();\n                        var top_offset = data.center_y - half_h;\n                        var bottom_offset = body_size.h - (data.center_y + half_h);\n                        var left_offset = data.center_x - half_w;\n                        var right_offset = body_size.w - (data.center_x + half_w);\n\n                        var label_hor_side = (body_size.w - data.center_x) < data.center_x ? 'left' : 'right';\n                        var label_ver_side = (body_size.h - data.center_y) < data.center_y ? 'top' : 'bottom';\n                        var label_shift = 150;\n                        var label_margin = 40;\n                        var label_shift_with_label_width = label_shift + label_width + label_margin;\n                        var label_shift_with_label_height = label_shift + label_height + label_margin;\n                        var label_hor_offset = half_w + label_shift;\n                        var label_ver_offset = half_h + label_shift;\n\n                        //original: var label_x = (label_hor_side == 'left') ? data.center_x - label_hor_offset - label_width : data.center_x + label_hor_offset;\n                        var label_y = (label_ver_side == 'top') ? data.center_y - label_ver_offset - label_height : data.center_y + label_ver_offset;\n                        var label_x = window.innerWidth / 2 - label_width / 2;\n\n                        if (top_offset < label_shift_with_label_height && bottom_offset < label_shift_with_label_height) {\n\n                            label_y = data.center_y + label_margin;\n                        }\n\n                        if (window.innerWidth <= 640) {\n\n                        }\n\n                        var label_data = that.renderLabel({\n                            x: label_x,\n                            y: label_y,\n                            text: data.text\n                        });\n\n                        var next_btn_x = window.innerWidth / 2 -  that.$next_btn.width() / 2;\n                        that.$next_btn.css({\n                            left: next_btn_x,\n                            top: label_y + label_height + 20\n                        });\n\n                        var left_skip = next_btn_x + that.$next_btn.width() + 30;\n\n                        if (that.nextBtn == \"hide\"){\n\n                            left_skip = label_x;\n                        }\n\n                        that.$skip_btn.css({\n                            left: left_skip,\n                            top: label_y + label_height + 20\n                        });\n\n                        that.$close_btn.css({\n                            right : 10,\n                            top: 10\n                        });\n\n                        that.disableEventsNearRect({\n                            top: shape_data.top,\n                            bottom: shape_data.bottom,\n                            left: shape_data.left,\n                            right: shape_data.right\n                        });\n\n                        var x_to = 0;\n                        var y_to = 0;\n                        var arrow_side = false;\n                        var conn_label_side = 'left';\n                        var conn_circle_side = 'left';\n\n                        var is_center = (label_data.left <= shape_data.x && label_data.right >= shape_data.x);\n                        var is_left = (label_data.right < shape_data.x);\n                        var is_right = (label_data.left > shape_data.x);\n\n                        var is_abs_left = (label_data.right < shape_data.left);\n                        var is_abs_right = (label_data.left > shape_data.right);\n\n                        var is_top = (label_data.bottom < shape_data.top);\n                        var is_bottom = (label_data.top > shape_data.bottom);\n                        var is_mid = (label_data.bottom >= shape_data.y && label_data.top <= shape_data.y);\n                        var is_mid_top = (label_data.bottom <= shape_data.y && !is_top);\n                        var is_mid_bottom = (label_data.top >= shape_data.y && !is_bottom);\n\n\n                        function setArrowData(l_s, c_s, a_s) {\n\n                            conn_label_side = l_s;\n                            conn_circle_side = c_s;\n                            arrow_side = a_s;\n                        }\n\n                        function sideStatements(top_s, mid_top_s, mid_s, mid_bottom_s, bottom_s) {\n\n                            var statement = [];\n\n                            if (is_top) {\n\n                                statement = top_s;\n                            } else if (is_mid_top) {\n\n                                statement = mid_top_s;\n                            } else if (is_mid) {\n\n                                statement = mid_s;\n                            } else if (is_mid_bottom) {\n\n                                statement = mid_bottom_s;\n                            } else {//bottom\n\n                                statement = bottom_s;\n                            }\n\n                            if (!statement) {\n\n                                return;\n                            } else {\n\n                                setArrowData(statement[0], statement[1], statement[2]);\n                            }\n                        }\n\n                        if (is_center) {\n\n                            if (is_top) {\n\n                                setArrowData('bottom', 'top', 'top');\n                            } else if (is_bottom) {\n\n                                setArrowData('top', 'bottom', 'bottom');\n                            } else {\n\n                                return;\n                            }\n\n                        } else if (is_left) {\n\n                            sideStatements(\n                                ['right', 'top', 'top'],//top\n                                ['bottom', 'left', 'bottom'],//mid_top\n                                ['right', 'left', 'top'],//mid\n                                ['top', 'left', 'top'],//mid_bot\n                                ['right', 'bottom', 'bottom']//bot\n                            );\n\n                        } else {//right\n\n                            sideStatements(\n                                ['left', 'top', 'top'],//top\n                                ['bottom', 'right', 'bottom'],//mid_top\n                                ['left', 'right', 'top'],//mid\n                                ['top', 'right', 'top'],//mid_bot\n                                ['left', 'bottom', 'bottom']//bot\n                            );\n\n                        }\n\n                        var label_conn_coordinates = label_data.conn[conn_label_side];\n                        var circle_conn_coordinates = shape_data.conn[conn_circle_side];\n                        var by_top_side = (arrow_side == 'top');\n\n                        that.renderArrow({\n                            x_from: label_conn_coordinates.x,\n                            y_from: label_conn_coordinates.y,\n                            x_to: window.innerWidth < 640 ? shape_data.left + (shape_data.left > 0) : circle_conn_coordinates.x,\n                            y_to: window.innerWidth < 640 ? shape_data.conn.left.y : circle_conn_coordinates.y,\n                            by_top_side: by_top_side\n                        });\n\n                    };\n\n                    that.clear = function () {\n\n                        that.ctx.clearRect(0, 0, 3000, 2000);\n                    };\n\n                    return this;\n                });\n            },\n\n            set: function (val) {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.setValue(val);\n                });\n\n                return this;\n            },\n\n            show: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.show();\n                });\n\n                return this;\n            },\n\n            hide: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.hide();\n                });\n\n                return this;\n            },\n\n            hide_next: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.hideNextBtn();\n                });\n\n                return this;\n            },\n\n            show_next: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.showNextBtn();\n                });\n\n                return this;\n            },\n\n            hide_skip: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.hideSkipBtn();\n                });\n\n                return this;\n            },\n\n            show_skip: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.showSkipBtn();\n                });\n\n                return this;\n            },\n\n            render_circle: function (x, y, r) {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.renderCircle(x, y, r);\n                });\n\n                return this;\n            },\n\n            render_label: function (x, y, r) {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.renderLabel(x, y, r);\n                });\n\n                return this;\n            },\n\n            render_label_with_shape: function (data, stopFunction) {\n\n                this.each(function () {\n\n                    that.stopFunction = stopFunction;\n                    this.enjoyhint_obj.renderLabelWithShape(data);\n                });\n\n                return this;\n            },\n\n            redo_events_near_rect: function(rect) {\n\n                that.disableEventsNearRect({\n                    top: rect.top,\n                    bottom: rect.bottom,\n                    left: rect.left,\n                    right: rect.right\n                });\n            },\n\n            clear: function () {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.clear();\n                });\n\n                return this;\n            },\n\n            close: function (val) {\n\n                this.each(function () {\n\n                    this.enjoyhint_obj.closePopdown();\n                });\n\n                return this;\n            }\n        };\n\n        $.fn.enjoyhint = function (method) {\n\n            if (methods[method]) {\n\n                return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n            } else if (typeof method === 'object' || !method) {\n\n                return methods.init.apply(this, arguments);\n            } else {\n\n                $.error('Method ' + method + ' does not exist on $.numinput');\n            }\n\n            return this;\n        };\n    })(window.jQuery);;/*! KineticJS v5.2.0 2015-01-22 http://lavrton.github.io/KineticJS/ by Eric Rowell @ericdrowell, Anton Lavrenov @lavrton - MIT License https://github.com/lavrton/KineticJS/wiki/License*/\n    var Kinetic={};!function(a){var b=Math.PI/180;Kinetic={version:\"5.2.0\",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},BaseLayer:function(a){this.___init(a)},Layer:function(a){this.____init(a)},FastLayer:function(a){this.____init(a)},Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){if(void 0!==b)for(var c=b.split(/\\s/g),d=0;d<c.length;d++){var e=c[d];e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(a))}},_removeName:function(a,b){if(void 0!==a){var c=this.names[a];if(void 0!==c){for(var d=0;d<c.length;d++){var e=c[d];e._id===b&&c.splice(d,1)}0===c.length&&delete this.names[a]}}},getAngle:function(a){return this.angleDeg?a*b:a},_parseUA:function(a){var b=a.toLowerCase(),c=/(chrome)[ \\/]([\\w.]+)/.exec(b)||/(webkit)[ \\/]([\\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(b)||/(msie) ([\\w.]+)/.exec(b)||b.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(b)||[],d=!!a.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),e=!!a.match(/IEMobile/i);return{browser:c[1]||\"\",version:c[2]||\"0\",mobile:d,ieMobile:e}},UA:void 0},Kinetic.UA=Kinetic._parseUA(a.navigator&&a.navigator.userAgent||\"\")}(this),function(a,b){if(\"object\"==typeof exports){var c=b();if(global.window===global)Kinetic.document=global.document,Kinetic.window=global;return Kinetic.root=a,void(module.exports=c)}\"function\"==typeof define&&define.amd&&define(b),Kinetic.document=document,Kinetic.window=window,Kinetic.root=a}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,c=0;for(this.length=b;b>c;c++)this[c]=a[c];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)},Kinetic.Collection.prototype.toArray=function(){var a,b=[],c=this.length;for(a=0;c>a;a++)b.push(this[a]);return b},Kinetic.Collection.toCollection=function(a){var b,c=new Kinetic.Collection,d=a.length;for(b=0;d>b;b++)c.push(a[b]);return c},Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var b,c=this.length,d=[].slice.call(arguments);for(b=0;c>b;b++)this[b][a].apply(this[b],d);return this}},Kinetic.Collection.mapMethods=function(a){var b=a.prototype;for(var c in b)Kinetic.Collection._mapMethod(c)},Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var b=this.m;return{x:b[0]*a.x+b[2]*a.y+b[4],y:b[1]*a.x+b[3]*a.y+b[5]}},translate:function(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this},scale:function(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=this.m[0]*-c+this.m[2]*b,g=this.m[1]*-c+this.m[3]*b;return this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(a,b){var c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;return this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f,this},multiply:function(a){var b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var c=this.m[0],d=this.m[1],e=this.m[2],f=this.m[3],g=this.m[4],h=this.m[5],i=(c*(b-h)-d*(a-g))/(c*f-d*e),j=(a-g-e*i)/c;return this.translate(j,i)}};var a=\"2d\",b=\"[object Array]\",c=\"[object Number]\",d=\"[object String]\",e=Math.PI/180,f=180/Math.PI,g=\"#\",h=\"\",i=\"0\",j=\"Kinetic warning: \",k=\"Kinetic error: \",l=\"rgb(\",m={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},n=/rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return Object.prototype.toString.call(a)==b},_isNumber:function(a){return Object.prototype.toString.call(a)==c},_isString:function(a){return Object.prototype.toString.call(a)==d},_throttle:function(a,b,c){var d,e,f,g=null,h=0,i=c||{},j=function(){h=i.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var c=(new Date).getTime();h||i.leading!==!1||(h=c);var k=b-(c-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=c,f=a.apply(d,e),d=e=null):g||i.trailing===!1||(g=setTimeout(j,k)),f}},_hasMethods:function(a){var b,c=[];for(b in a)this._isFunction(a[b])&&c.push(b);return c.length>0},createCanvasElement:function(){var a=Kinetic.document.createElement(\"canvas\");try{a.style=a.style||{}}catch(b){}return a},isBrowser:function(){return\"object\"!=typeof exports},_isInDocument:function(a){for(;a=a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var b,c,d=[],e=a.length,f=Kinetic.Util;for(b=0;e>b;b++)c=a[b],f._isNumber(c)?c=Math.round(1e3*c)/1e3:f._isString(c)||(c=c.toString()),d.push(c);return d},_getImage:function(b,c){var d,e;if(b)if(this._isElement(b))c(b);else if(this._isString(b))d=new Kinetic.window.Image,d.onload=function(){c(d)},d.src=b;else if(b.data){e=Kinetic.Util.createCanvasElement(),e.width=b.width,e.height=b.height;var f=e.getContext(a);f.putImageData(b,0,0),this._getImage(e.toDataURL(),c)}else c(null);else c(null)},_getRGBAString:function(a){var b=a.red||0,c=a.green||0,d=a.blue||0,e=a.alpha||1;return[\"rgba(\",b,\",\",c,\",\",d,\",\",e,\")\"].join(h)},_rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace(g,h);var b=parseInt(a,16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a=i+a;return g+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in m?(b=m[a],{r:b[0],g:b[1],b:b[2]}):a[0]===g?this._hexToRgb(a.substring(1)):a.substr(0,4)===l?(b=n.exec(a.replace(/ /g,\"\")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var c=this._clone(b);for(var d in a)c[d]=this._isObject(a[d])?this._merge(a[d],c[d]):a[d];return c},cloneObject:function(a){var b={};for(var c in a)b[c]=this._isObject(a[c])?this.cloneObject(a[c]):this._isArray(a[c])?this.cloneArray(a[c]):a[c];return b},cloneArray:function(a){return a.slice(0)},_degToRad:function(a){return a*e},_radToDeg:function(a){return a*f},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw new Error(k+a)},warn:function(a){Kinetic.root.console&&console.warn&&Kinetic.showWarnings&&console.warn(j+a)},extend:function(a,b){function c(){this.constructor=a}c.prototype=b.prototype;var d=a.prototype;a.prototype=new c;for(var e in d)d.hasOwnProperty(e)&&(a.prototype[e]=d[e]);a.__super__=b.prototype},addMethods:function(a,b){var c;for(c in b)a.prototype[c]=b[c]},_getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g*i/(h+i),l=c-j*(e-a),m=d-j*(f-b),n=c+k*(e-a),o=d+k*(f-b);return[l,m,n,o]},_expandPoints:function(a,b){var c,d,e=a.length,f=[];for(c=2;e-2>c;c+=2)d=Kinetic.Util._getControlPoints(a[c-2],a[c-1],a[c],a[c+1],a[c+2],a[c+3],b),f.push(d[0]),f.push(d[1]),f.push(a[c]),f.push(a[c+1]),f.push(d[2]),f.push(d[3]);return f},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}}(),function(){var a=Kinetic.Util.createCanvasElement(),b=a.getContext(\"2d\"),c=Kinetic.UA.mobile?function(){var a=window.devicePixelRatio||1,c=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return a/c}():1;Kinetic.Canvas=function(a){this.init(a)},Kinetic.Canvas.prototype={init:function(a){var b=a||{},d=b.pixelRatio||Kinetic.pixelRatio||c;this.pixelRatio=d,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background=\"transparent\",this._canvas.style.position=\"absolute\",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+\"px\"},setHeight:function(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+\"px\"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(c){try{return this._canvas.toDataURL()}catch(d){return Kinetic.Util.warn(\"Unable to get data URL. \"+d.message),\"\"}}}},Kinetic.SceneCanvas=function(a){var b=a||{},c=b.width||0,d=b.height||0;Kinetic.Canvas.call(this,b),this.context=new Kinetic.SceneContext(this),this.setSize(c,d)},Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a),c.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a),c.scale(b,b)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(a){var b=a||{},c=b.width||0,d=b.height||0;Kinetic.Canvas.call(this,b),this.context=new Kinetic.HitContext(this),this.setSize(c,d),this.hitCanvas=!0},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=\",\",b=\"(\",c=\")\",d=\"([\",e=\"])\",f=\";\",g=\"()\",h=\"=\",i=[\"arc\",\"arcTo\",\"beginPath\",\"bezierCurveTo\",\"clearRect\",\"clip\",\"closePath\",\"createLinearGradient\",\"createPattern\",\"createRadialGradient\",\"drawImage\",\"fill\",\"fillText\",\"getImageData\",\"createImageData\",\"lineTo\",\"moveTo\",\"putImageData\",\"quadraticCurveTo\",\"rect\",\"restore\",\"rotate\",\"save\",\"scale\",\"setLineDash\",\"setTransform\",\"stroke\",\"strokeText\",\"transform\",\"translate\"];Kinetic.Context=function(a){this.init(a)},Kinetic.Context.prototype={init:function(a){this.canvas=a,this._context=a._canvas.getContext(\"2d\"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){var b=a.getFillEnabled();b&&this._fill(a),a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(i){var j,k,l,m,n=this.traceArr,o=n.length,p=\"\";for(j=0;o>j;j++)k=n[j],l=k.method,l?(m=k.args,p+=l,p+=i?g:Kinetic.Util._isArray(m[0])?d+m.join(a)+e:b+m.join(a)+c):(p+=k.property,i||(p+=h+k.val)),p+=f;return p},clearTrace:function(){this.traceArr=[]},_trace:function(a){var b,c=this.traceArr;c.push(a),b=c.length,b>=Kinetic.traceArrMax&&c.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(a){var b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth(),b.getHeight())},_applyLineCap:function(a){var b=a.getLineCap();b&&this.setAttr(\"lineCap\",b)},_applyOpacity:function(a){var b=a.getAbsoluteOpacity();1!==b&&this.setAttr(\"globalAlpha\",b)},_applyLineJoin:function(a){var b=a.getLineJoin();b&&this.setAttr(\"lineJoin\",b)},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var a=arguments;return 2===a.length?this._context.createImageData(a[0],a[1]):1===a.length?this._context.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){var a=arguments;this._context.rotate(a[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this._context;this._context.setLineDash?b.setLineDash(a[0]):\"mozDash\"in b?b.mozDash=a[0]:\"webkitLineDash\"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],a[1])},_enableTrace:function(){var a,b,c=this,d=i.length,e=Kinetic.Util._simplifyArray,f=this.setAttr,g=function(a){var d,f=c[a];c[a]=function(){return b=e(Array.prototype.slice.call(arguments,0)),d=f.apply(c,arguments),c._trace({method:a,args:b}),d}};for(a=0;d>a;a++)g(i[a]);c.setAttr=function(){f.apply(c,arguments),c._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)},Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.fill()||Kinetic.Util._getRGBAString({red:a.fillRed(),green:a.fillGreen(),blue:a.fillBlue(),alpha:a.fillAlpha()});this.setAttr(\"fillStyle\",b),a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),c=a.getFillPatternX(),d=a.getFillPatternY(),e=a.getFillPatternScale(),f=Kinetic.getAngle(a.getFillPatternRotation()),g=a.getFillPatternOffset(),h=a.getFillPatternRepeat();(c||d)&&this.translate(c||0,d||0),f&&this.rotate(f),e&&this.scale(e.x,e.y),g&&this.translate(-1*g.x,-1*g.y),this.setAttr(\"fillStyle\",this.createPattern(b,h||\"repeat\")),this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),c=a.getFillLinearGradientEndPoint(),d=a.getFillLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(var f=0;f<d.length;f+=2)e.addColorStop(d[f],d[f+1]);this.setAttr(\"fillStyle\",e),this.fill()}},_fillRadialGradient:function(a){for(var b=a.getFillRadialGradientStartPoint(),c=a.getFillRadialGradientEndPoint(),d=a.getFillRadialGradientStartRadius(),e=a.getFillRadialGradientEndRadius(),f=a.getFillRadialGradientColorStops(),g=this.createRadialGradient(b.x,b.y,d,c.x,c.y,e),h=0;h<f.length;h+=2)g.addColorStop(f[h],f[h+1]);this.setAttr(\"fillStyle\",g),this.fill()},_fill:function(a){var b=a.fill()||a.fillRed()||a.fillGreen()||a.fillBlue(),c=a.getFillPatternImage(),d=a.getFillLinearGradientColorStops(),e=a.getFillRadialGradientColorStops(),f=a.getFillPriority();b&&\"color\"===f?this._fillColor(a):c&&\"pattern\"===f?this._fillPattern(a):d&&\"linear-gradient\"===f?this._fillLinearGradient(a):e&&\"radial-gradient\"===f?this._fillRadialGradient(a):b?this._fillColor(a):c?this._fillPattern(a):d?this._fillLinearGradient(a):e&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.dash(),c=a.getStrokeScaleEnabled();a.hasStroke()&&(c||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),b&&a.dashEnabled()&&this.setLineDash(b),this.setAttr(\"lineWidth\",a.strokeWidth()),this.setAttr(\"strokeStyle\",a.stroke()||Kinetic.Util._getRGBAString({red:a.strokeRed(),green:a.strokeGreen(),blue:a.strokeBlue(),alpha:a.strokeAlpha()})),a._strokeFunc(this),c||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,c=a.getAbsoluteOpacity(),d=b.get(a.getShadowColor(),\"black\"),e=b.get(a.getShadowBlur(),5),f=b.get(a.getShadowOpacity(),1),g=b.get(a.getShadowOffset(),{x:0,y:0});f&&this.setAttr(\"globalAlpha\",f*c),this.setAttr(\"shadowColor\",d),this.setAttr(\"shadowBlur\",e),this.setAttr(\"shadowOffsetX\",g.x),this.setAttr(\"shadowOffsetY\",g.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(a){Kinetic.Context.call(this,a)},Kinetic.HitContext.prototype={_fill:function(a){this.save(),this.setAttr(\"fillStyle\",a.colorKey),a._fillFuncHit(this),this.restore()},_stroke:function(a){a.hasStroke()&&(this._applyLineCap(a),this.setAttr(\"lineWidth\",a.strokeWidth()),this.setAttr(\"strokeStyle\",a.colorKey),a._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var a=\"get\",b=\"set\";Kinetic.Factory={addGetterSetter:function(a,b,c,d,e){this.addGetter(a,b,c),this.addSetter(a,b,d,e),this.addOverloadedGetterSetter(a,b)},addGetter:function(b,c,d){var e=a+Kinetic.Util._capitalize(c);b.prototype[e]=function(){var a=this.attrs[c];return void 0===a?d:a}},addSetter:function(a,c,d,e){var f=b+Kinetic.Util._capitalize(c);a.prototype[f]=function(a){return d&&(a=d.call(this,a)),this._setAttr(c,a),e&&e.call(this),this}},addComponentsGetterSetter:function(c,d,e,f,g){var h,i,j=e.length,k=Kinetic.Util._capitalize,l=a+k(d),m=b+k(d);c.prototype[l]=function(){var a={};for(h=0;j>h;h++)i=e[h],a[i]=this.getAttr(d+k(i));return a},c.prototype[m]=function(a){var b,c=this.attrs[d];f&&(a=f.call(this,a));for(b in a)this._setAttr(d+k(b),a[b]);return this._fireChangeEvent(d,c,a),g&&g.call(this),this},this.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter:function(c,d){var e=Kinetic.Util._capitalize(d),f=b+e,g=a+e;c.prototype[d]=function(){return arguments.length?(this[f](arguments[0]),this):this[g]()}},backCompat:function(a,b){var c;for(c in b)a.prototype[c]=a.prototype[b[c]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(a){return a>255?255:0>a?0:Math.round(a)},alphaComponent:function(a){return a>1?1:1e-4>a?1e-4:a}}}(),function(){var a=\"absoluteOpacity\",b=\"absoluteTransform\",c=\"Change\",d=\"children\",e=\".\",f=\"\",g=\"get\",h=\"id\",i=\"kinetic\",j=\"listening\",k=\"mouseenter\",l=\"mouseleave\",m=\"name\",n=\"set\",o=\"Shape\",p=\" \",q=\"stage\",r=\"transform\",s=\"Stage\",t=\"visible\",u=[\"id\"],v=[\"xChange.kinetic\",\"yChange.kinetic\",\"scaleXChange.kinetic\",\"scaleYChange.kinetic\",\"skewXChange.kinetic\",\"skewYChange.kinetic\",\"rotationChange.kinetic\",\"offsetXChange.kinetic\",\"offsetYChange.kinetic\",\"transformsEnabledChange.kinetic\"].join(p);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(c){var d=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(c),this.on(v,function(){this._clearCache(r),d._clearSelfAndDescendantCache(b)}),this.on(\"visibleChange.kinetic\",function(){d._clearSelfAndDescendantCache(t)}),this.on(\"listeningChange.kinetic\",function(){d._clearSelfAndDescendantCache(j)}),this.on(\"opacityChange.kinetic\",function(){d._clearSelfAndDescendantCache(a)})},_clearCache:function(a){a?delete this._cache[a]:this._cache={}},_getCache:function(a,b){var c=this._cache[a];return void 0===c&&(this._cache[a]=b.call(this)),this._cache[a]},_clearSelfAndDescendantCache:function(a){this._clearCache(a),this.children&&this.getChildren().each(function(b){b._clearSelfAndDescendantCache(a)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(a){var b=a||{},c=b.x||0,d=b.y||0,e=b.width||this.width(),f=b.height||this.height(),g=b.drawBorder||!1;if(0===e||0===f)return void Kinetic.Util.warn(\"Width or height of caching configuration equals 0. Cache is ignored.\");var h=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),i=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),j=new Kinetic.HitCanvas({width:e,height:f}),k=h.getContext(),l=j.getContext();return j.isCache=!0,this.clearCache(),k.save(),l.save(),g&&(k.save(),k.beginPath(),k.rect(0,0,e,f),k.closePath(),k.setAttr(\"strokeStyle\",\"red\"),k.setAttr(\"lineWidth\",5),k.stroke(),k.restore()),k.translate(-1*c,-1*d),l.translate(-1*c,-1*d),\"Shape\"===this.nodeType&&(k.translate(-1*this.x(),-1*this.y()),l.translate(-1*this.x(),-1*this.y())),this.drawScene(h,this),this.drawHit(j,this),k.restore(),l.restore(),this._cache.canvas={scene:h,filter:i,hit:j},this},_drawCachedSceneCanvas:function(a){a.save(),this.getLayer()._applyTransform(this,a),a._applyOpacity(this),a.drawImage(this._getCachedSceneCanvas()._canvas,0,0),a.restore()},_getCachedSceneCanvas:function(){var a,b,c,d,e=this.filters(),f=this._cache.canvas,g=f.scene,h=f.filter,i=h.getContext();if(e){if(!this._filterUpToDate){try{for(a=e.length,i.clear(),i.drawImage(g._canvas,0,0),b=i.getImageData(0,0,h.getWidth(),h.getHeight()),c=0;a>c;c++)d=e[c],d.call(this,b),i.putImageData(b,0,0)}catch(j){Kinetic.Util.warn(\"Unable to apply filter. \"+j.message)}this._filterUpToDate=!0}return h}return g},_drawCachedHitCanvas:function(a){var b=this._cache.canvas,c=b.hit;a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(c._canvas,0,0),a.restore()},on:function(a,b){var c,d,g,h,i,j=a.split(p),k=j.length;for(c=0;k>c;c++)d=j[c],g=d.split(e),h=g[0],i=g[1]||f,this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:i,handler:b});return this},off:function(a){var b,c,d,f,g,h,i=(a||\"\").split(p),j=i.length;if(!a)for(c in this.eventListeners)this._off(c);for(b=0;j>b;b++)if(d=i[b],f=d.split(e),g=f[0],h=f[1],g)this.eventListeners[g]&&this._off(g,h);else for(c in this.eventListeners)this._off(c,h);return this},dispatchEvent:function(a){var b={target:this,type:a.type,evt:a};this.fire(a.type,b)},addEventListener:function(a,b){this.on(a,function(a){b.call(this,a.evt)})},removeEventListener:function(a){this.off(a)},remove:function(){var c=this.getParent();return c&&c.children&&(c.children.splice(this.index,1),c._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(a),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(a){var b=g+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,c;if(a)for(b in a)b===d||a[b]instanceof Kinetic.Node||(c=n+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache(j,this._isListening)},_isListening:function(){var a=this.getListening(),b=this.getParent();return\"inherit\"===a?b?b.isListening():!0:a},isVisible:function(){return this._getCache(t,this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return\"inherit\"===a?b?b.isVisible():!0:a},shouldDrawHit:function(a){var b=this.getLayer();return a&&a.isCache||b&&b.hitGraphEnabled()&&this.isListening()&&this.isVisible()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(i){for(b=[],c=i.length,d=0;c>d;d++)e=i[d],h++,e.nodeType!==o&&(b=b.concat(e.getChildren().toArray())),e._id===g._id&&(d=c);b.length>0&&b[0].getDepth()<=f&&a(b)}var b,c,d,e,f=this.getDepth(),g=this,h=0;return g.nodeType!==s&&a(g.getStage().getChildren()),h},getDepth:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,c=this.offset();return b.m=a.slice(),b.translate(c.x,c.y),b.getTranslation()},setAbsolutePosition:function(a){var b,c=this._clearTransform();return this.attrs.x=c.x,this.attrs.y=c.y,delete c.x,delete c.y,b=this.getAbsoluteTransform(),b.invert(),b.translate(a.x,a.y),a={x:this.attrs.x+b.getTranslation().x,y:this.attrs.y+b.getTranslation().y},this.setPosition({x:a.x,y:a.y}),this._setTransform(c),this},_setTransform:function(a){var c;for(c in a)this.attrs[c]=a[c];this._clearCache(r),this._clearSelfAndDescendantCache(b)},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(r),this._clearSelfAndDescendantCache(b),a},move:function(a){var b=a.x,c=a.y,d=this.getX(),e=this.getY();return void 0!==b&&(d+=b),void 0!==c&&(e+=c),this.setPosition({x:d,y:e}),this},_eachAncestorReverse:function(a,b){var c,d,e=[],f=this.getParent();if(b&&b._id===this._id)return a(this),!0;for(e.unshift(this);f&&(!b||f._id!==b._id);)e.unshift(f),f=f.parent;for(c=e.length,d=0;c>d;d++)a(e[d])},rotate:function(a){return this.setRotation(this.getRotation()+a),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn(\"Node has no parent. moveToTop function is ignored.\");var a=this.index;return this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn(\"Node has no parent. moveUp function is ignored.\");var a=this.index,b=this.parent.getChildren().length;return b-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn(\"Node has no parent. moveDown function is ignored.\");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn(\"Node has no parent. moveToBottom function is ignored.\");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){if(!this.parent)return void Kinetic.Util.warn(\"Node has no parent. zIndex parameter is ignored.\");var b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(a,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return this.getParent()!==a&&(this.remove(),a.add(this)),this},toObject:function(){var a,b,c,d,e=Kinetic.Util,f={},g=this.getAttrs();f.attrs={};for(a in g)b=g[a],e._isFunction(b)||e._isElement(b)||e._isObject(b)&&e._hasMethods(b)||(c=this[a],delete g[a],d=c?c.call(this):null,g[a]=b,d!==b&&(f.attrs[a]=b));return f.className=this.getClassName(),f},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var a=this.getParent();return a?a.getLayer():null},getStage:function(){return this._getCache(q,this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,c){return c?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(a){return a?this._getAbsoluteTransform(a):this._getCache(b,this._getAbsoluteTransform)},_getAbsoluteTransform:function(a){var b,c,d=new Kinetic.Transform;return this._eachAncestorReverse(function(a){b=a.transformsEnabled(),c=a.getTransform(),\"all\"===b?d.multiply(c):\"position\"===b&&d.translate(a.x(),a.y())},a),d},getTransform:function(){return this._getCache(r,this._getTransform)},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),c=this.getY(),d=Kinetic.getAngle(this.getRotation()),e=this.getScaleX(),f=this.getScaleY(),g=this.getSkewX(),h=this.getSkewY(),i=this.getOffsetX(),j=this.getOffsetY();return(0!==b||0!==c)&&a.translate(b,c),0!==d&&a.rotate(d),(0!==g||0!==h)&&a.skew(g,h),(1!==e||1!==f)&&a.scale(e,f),(0!==i||0!==j)&&a.translate(-1*i,-1*j),a},clone:function(a){var b,c,d,e,f,g=this.getClassName(),h=Kinetic.Util.cloneObject(this.attrs);for(var j in u){var k=u[j];delete h[k]}for(b in a)h[b]=a[b];var l=new Kinetic[g](h);for(b in this.eventListeners)for(c=this.eventListeners[b],d=c.length,e=0;d>e;e++)f=c[e],f.name.indexOf(i)<0&&(l.eventListeners[b]||(l.eventListeners[b]=[]),l.eventListeners[b].push(f));return l},toDataURL:function(a){a=a||{};var b=a.mimeType||null,c=a.quality||null,d=this.getStage(),e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth()||(d?d.getWidth():0),height:a.height||this.getHeight()||(d?d.getHeight():0),pixelRatio:1}),h=g.getContext();return h.save(),(e||f)&&h.translate(-1*e,-1*f),this.drawScene(g),h.restore(),g.toDataURL(b,c)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(a){return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance\n    },_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},_off:function(a,b){var c,d,e=this.eventListeners[a];for(c=0;c<e.length;c++)if(d=e[c].name,!(\"kinetic\"===d&&\"kinetic\"!==b||b&&d!==b)){if(e.splice(c,1),0===e.length){delete this.eventListeners[a];break}c--}},_fireChangeEvent:function(a,b,d){this._fire(a+c,{oldVal:b,newVal:d})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr(h,a),this},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr(m,a),this},setAttr:function(a,b){var c=n+Kinetic.Util._capitalize(a),d=this[c];return Kinetic.Util._isFunction(d)?d.call(this,b):this._setAttr(a,b),this},_setAttr:function(a,b){var c;void 0!==b&&(c=this.attrs[a],this.attrs[a]=b,this._fireChangeEvent(a,c,b))},_setComponentAttr:function(a,b,c){var d;void 0!==c&&(d=this.attrs[a],d||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=c,this._fireChangeEvent(a,d,c))},_fireAndBubble:function(a,b,c){var d=!0;if(b&&this.nodeType===o&&(b.target=this),a===k&&c&&(this._id===c._id||this.isAncestorOf&&this.isAncestorOf(c))?d=!1:a===l&&c&&(this._id===c._id||this.isAncestorOf&&this.isAncestorOf(c))&&(d=!1),d){this._fire(a,b);var e=(a===k||a===l)&&(c&&c.isAncestorOf&&c.isAncestorOf(this)||!(!c||!c.isAncestorOf));b&&!b.cancelBubble&&this.parent&&this.parent.isListening()&&!e&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c.parent):this._fireAndBubble.call(this.parent,a,b))}},_fire:function(a,b){var c,d=this.eventListeners[a];if(b.type=a,d)for(c=0;c<d.length;c++)d[c].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)},Kinetic.Node._createNode=function(a,b){var c,d,e,f=Kinetic.Node.prototype.getClassName.call(a),g=a.children;if(b&&(a.attrs.container=b),c=new Kinetic[f](a.attrs),g)for(d=g.length,e=0;d>e;e++)c.add(this._createNode(g[e]));return c},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"position\"),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"x\",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"y\",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"opacity\",1),Kinetic.Factory.addGetter(Kinetic.Node,\"name\"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"name\"),Kinetic.Factory.addGetter(Kinetic.Node,\"id\"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"id\"),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"rotation\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,\"scale\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"scaleX\",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"scaleY\",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,\"skew\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"skewX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"skewY\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,\"offset\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"offsetX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"offsetY\",0),Kinetic.Factory.addSetter(Kinetic.Node,\"dragDistance\"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"dragDistance\"),Kinetic.Factory.addSetter(Kinetic.Node,\"width\",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"width\"),Kinetic.Factory.addSetter(Kinetic.Node,\"height\",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"height\"),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"listening\",\"inherit\"),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"filters\",void 0,function(a){return this._filterUpToDate=!1,a}),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"visible\",\"inherit\"),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"transformsEnabled\",\"all\"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"size\"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:\"rotate\",setRotationDeg:\"setRotation\",getRotationDeg:\"getRotation\"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(a){var b,c,d=a.data,e=d.length;for(b=0;e>b;b+=4)c=.34*d[b]+.5*d[b+1]+.16*d[b+2],d[b]=c,d[b+1]=c,d[b+2]=c}}(),function(){Kinetic.Filters.Brighten=function(a){var b,c=255*this.brightness(),d=a.data,e=d.length;for(b=0;e>b;b+=4)d[b]+=c,d[b+1]+=c,d[b+2]+=c},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"brightness\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(a){var b,c=a.data,d=c.length;for(b=0;d>b;b+=4)c[b]=255-c[b],c[b+1]=255-c[b+1],c[b+2]=255-c[b+2]}}(),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=b.data,E=b.width,F=b.height,G=e+e+1,H=E-1,I=F-1,J=e+1,K=J*(J+1)/2,L=new a,M=null,N=L,O=null,P=null,Q=c[e],R=d[e];for(h=1;G>h;h++)N=N.next=new a,h==J&&(M=N);for(N.next=L,l=k=0,g=0;F>g;g++){for(u=v=w=x=m=n=o=p=0,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(h=1;J>h;h++)i=k+((h>H?H:h)<<2),m+=(N.r=y=D[i])*(C=J-h),n+=(N.g=z=D[i+1])*C,o+=(N.b=A=D[i+2])*C,p+=(N.a=B=D[i+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next;for(O=L,P=M,f=0;E>f;f++)D[k+3]=B=p*Q>>R,0!==B?(B=255/B,D[k]=(m*Q>>R)*B,D[k+1]=(n*Q>>R)*B,D[k+2]=(o*Q>>R)*B):D[k]=D[k+1]=D[k+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=l+((i=f+e+1)<H?i:H)<<2,u+=O.r=D[i],v+=O.g=D[i+1],w+=O.b=D[i+2],x+=O.a=D[i+3],m+=u,n+=v,o+=w,p+=x,O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=4;l+=E}for(f=0;E>f;f++){for(v=w=x=u=n=o=p=m=0,k=f<<2,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(j=E,h=1;e>=h;h++)k=j+f<<2,m+=(N.r=y=D[k])*(C=J-h),n+=(N.g=z=D[k+1])*C,o+=(N.b=A=D[k+2])*C,p+=(N.a=B=D[k+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next,I>h&&(j+=E);for(k=f,O=L,P=M,g=0;F>g;g++)i=k<<2,D[i+3]=B=p*Q>>R,B>0?(B=255/B,D[i]=(m*Q>>R)*B,D[i+1]=(n*Q>>R)*B,D[i+2]=(o*Q>>R)*B):D[i]=D[i+1]=D[i+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=f+((i=g+J)<I?i:I)*E<<2,m+=u+=O.r=D[i],n+=v+=O.g=D[i+1],o+=w+=O.b=D[i+2],p+=x+=O.a=D[i+3],O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=E}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var c=Math.round(this.blurRadius());c>0&&b(a,c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"blurRadius\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c){var d=4*(c*a.width+b),e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function b(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}function c(a){for(var b=[0,0,0],c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}function d(d,e){var f=a(d,0,0),g=a(d,d.width-1,0),h=a(d,0,d.height-1),i=a(d,d.width-1,d.height-1),j=e||10;if(b(f,g)<j&&b(g,i)<j&&b(i,h)<j&&b(h,f)<j){for(var k=c([g,f,i,h]),l=[],m=0;m<d.width*d.height;m++){var n=b(k,[d.data[4*m],d.data[4*m+1],d.data[4*m+2]]);l[m]=j>n?0:255}return l}}function e(a,b){for(var c=0;c<a.width*a.height;c++)a.data[4*c+3]=b[c]}function f(a,b,c){for(var d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=2040===k?255:0}return g}function g(a,b,c){for(var d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k>=1020?255:0}return g}function h(a,b,c){for(var d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k}return g}Kinetic.Filters.Mask=function(a){var b=this.threshold(),c=d(a,b);return c&&(c=f(c,a.width,a.height),c=g(c,a.width,a.height),c=h(c,a.width,a.height),e(a,c)),a},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"threshold\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(a){var b,c,d=a.data,e=d.length,f=this.red(),g=this.green(),h=this.blue();for(b=0;e>b;b+=4)c=(.34*d[b]+.5*d[b+1]+.16*d[b+2])/255,d[b]=c*f,d[b+1]=c*g,d[b+2]=c*h,d[b+3]=d[b+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"red\",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"green\",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"blue\",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=Math.pow(2,this.value()),j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=i*j*Math.cos(k*Math.PI/180),m=i*j*Math.sin(k*Math.PI/180),n=.299*i+.701*l+.167*m,o=.587*i-.587*l+.33*m,p=.114*i-.114*l-.497*m,q=.299*i-.299*l-.328*m,r=.587*i+.413*l+.035*m,s=.114*i-.114*l+.293*m,t=.299*i-.3*l+1.25*m,u=.587*i-.586*l-1.05*m,v=.114*i+.886*l-.2*m;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=n*c+o*d+p*e,g[b+1]=q*c+r*d+s*e,g[b+2]=t*c+u*d+v*e,g[b+3]=f},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"hue\",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"saturation\",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"value\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,\"hue\",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"saturation\",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"luminance\",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=1,j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=127*this.luminance(),m=i*j*Math.cos(k*Math.PI/180),n=i*j*Math.sin(k*Math.PI/180),o=.299*i+.701*m+.167*n,p=.587*i-.587*m+.33*n,q=.114*i-.114*m-.497*n,r=.299*i-.299*m-.328*n,s=.587*i+.413*m+.035*n,t=.114*i-.114*m+.293*n,u=.299*i-.3*m+1.25*n,v=.587*i-.586*m-1.05*n,w=.114*i+.886*m-.2*n;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=o*c+p*d+q*e+l,g[b+1]=r*c+s*d+t*e+l,g[b+2]=u*c+v*d+w*e+l,g[b+3]=f}}(),function(){Kinetic.Filters.Emboss=function(a){var b=10*this.embossStrength(),c=255*this.embossWhiteLevel(),d=this.embossDirection(),e=this.embossBlend(),f=0,g=0,h=a.data,i=a.width,j=a.height,k=4*i,l=j;switch(d){case\"top-left\":f=-1,g=-1;break;case\"top\":f=-1,g=0;break;case\"top-right\":f=-1,g=1;break;case\"right\":f=0,g=1;break;case\"bottom-right\":f=1,g=1;break;case\"bottom\":f=1,g=0;break;case\"bottom-left\":f=1,g=-1;break;case\"left\":f=0,g=-1}do{var m=(l-1)*k,n=f;1>l+n&&(n=0),l+n>j&&(n=0);var o=(l-1+n)*i*4,p=i;do{var q=m+4*(p-1),r=g;1>p+r&&(r=0),p+r>i&&(r=0);var s=o+4*(p-1+r),t=h[q]-h[s],u=h[q+1]-h[s+1],v=h[q+2]-h[s+2],w=t,x=w>0?w:-w,y=u>0?u:-u,z=v>0?v:-v;if(y>x&&(w=u),z>x&&(w=v),w*=b,e){var A=h[q]+w,B=h[q+1]+w,C=h[q+2]+w;h[q]=A>255?255:0>A?0:A,h[q+1]=B>255?255:0>B?0:B,h[q+2]=C>255?255:0>C?0:C}else{var D=c-w;0>D?D=0:D>255&&(D=255),h[q]=h[q+1]=h[q+2]=D}}while(--p)}while(--l)},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"embossStrength\",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"embossWhiteLevel\",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"embossDirection\",\"top-left\",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"embossBlend\",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c,d,e){var f,g=c-b,h=e-d;return 0===g?d+h/2:0===h?d:(f=(a-b)/g,f=h*f+d)}Kinetic.Filters.Enhance=function(b){var c,d,e,f,g=b.data,h=g.length,i=g[0],j=i,k=g[1],l=k,m=g[2],n=m,o=this.enhance();if(0!==o){for(f=0;h>f;f+=4)c=g[f+0],i>c?i=c:c>j&&(j=c),d=g[f+1],k>d?k=d:d>l&&(l=d),e=g[f+2],m>e?m=e:e>n&&(n=e);j===i&&(j=255,i=0),l===k&&(l=255,k=0),n===m&&(n=255,m=0);var p,q,r,s,t,u,v,w,x;for(o>0?(q=j+o*(255-j),r=i-o*(i-0),t=l+o*(255-l),u=k-o*(k-0),w=n+o*(255-n),x=m-o*(m-0)):(p=.5*(j+i),q=j+o*(j-p),r=i+o*(i-p),s=.5*(l+k),t=l+o*(l-s),u=k+o*(k-s),v=.5*(n+m),w=n+o*(n-v),x=m+o*(m-v)),f=0;h>f;f+=4)g[f+0]=a(g[f+0],i,j,r,q),g[f+1]=a(g[f+1],k,l,u,t),g[f+2]=a(g[f+2],m,n,x,w)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"enhance\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(a){var b,c=Math.round(254*this.levels())+1,d=a.data,e=d.length,f=255/c;for(b=0;e>b;b+=1)d[b]=Math.floor(d[b]/f)*f},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"levels\",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(a){var b,c=255*this.noise(),d=a.data,e=d.length,f=c/2;for(b=0;e>b;b+=4)d[b+0]+=f-2*f*Math.random(),d[b+1]+=f-2*f*Math.random(),d[b+2]+=f-2*f*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"noise\",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=Math.ceil(this.pixelSize()),q=a.width,r=a.height,s=Math.ceil(q/p),t=Math.ceil(r/p);for(a=a.data,m=0;s>m;m+=1)for(n=0;t>n;n+=1){for(e=0,f=0,g=0,h=0,i=m*p,j=i+p,k=n*p,l=k+p,o=0,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),e+=a[d+0],f+=a[d+1],g+=a[d+2],h+=a[d+3],o+=1);for(e/=o,f/=o,g/=o,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),a[d+0]=e,a[d+1]=f,a[d+2]=g,a[d+3]=h)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"pixelSize\",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(a){var b,c=255*this.threshold(),d=a.data,e=d.length;for(b=0;e>b;b+=1)d[b]=d[b]<c?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"threshold\",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(a){var b,c,d,e,f,g,h,i,j,k=a.data,l=a.width,m=a.height,n=4*l;do{b=(m-1)*n,c=l;do d=b+4*(c-1),e=k[d],f=k[d+1],g=k[d+2],h=.393*e+.769*f+.189*g,i=.349*e+.686*f+.168*g,j=.272*e+.534*f+.131*g,k[d]=h>255?255:h,k[d+1]=i>255?255:i,k[d+2]=j>255?255:j,k[d+3]=k[d+3];while(--c)}while(--m)}}(),function(){Kinetic.Filters.Solarize=function(a){var b=a.data,c=a.width,d=a.height,e=4*c,f=d;do{var g=(f-1)*e,h=c;do{var i=g+4*(h-1),j=b[i],k=b[i+1],l=b[i+2];j>127&&(j=255-j),k>127&&(k=255-k),l>127&&(l=255-l),b[i]=j,b[i+1]=k,b[i+2]=l}while(--h)}while(--f)}}(),function(){var a=function(a,b,c){var d,e,f,g,h=a.data,i=b.data,j=a.width,k=a.height,l=c.polarCenterX||j/2,m=c.polarCenterY||k/2,n=0,o=0,p=0,q=0,r=Math.sqrt(l*l+m*m);e=j-l,f=k-m,g=Math.sqrt(e*e+f*f),r=g>r?g:r;var s,t,u,v,w=k,x=j,y=360/x*Math.PI/180;for(t=0;x>t;t+=1)for(u=Math.sin(t*y),v=Math.cos(t*y),s=0;w>s;s+=1)e=Math.floor(l+r*s/w*v),f=Math.floor(m+r*s/w*u),d=4*(f*j+e),n=h[d+0],o=h[d+1],p=h[d+2],q=h[d+3],d=4*(t+s*j),i[d+0]=n,i[d+1]=o,i[d+2]=p,i[d+3]=q},b=function(a,b,c){var d,e,f,g,h,i,j=a.data,k=b.data,l=a.width,m=a.height,n=c.polarCenterX||l/2,o=c.polarCenterY||m/2,p=0,q=0,r=0,s=0,t=Math.sqrt(n*n+o*o);e=l-n,f=m-o,i=Math.sqrt(e*e+f*f),t=i>t?i:t;var u,v,w,x,y=m,z=l,A=c.polarRotation||0;for(e=0;l>e;e+=1)for(f=0;m>f;f+=1)g=e-n,h=f-o,u=Math.sqrt(g*g+h*h)*y/t,v=(180*Math.atan2(h,g)/Math.PI+360+A)%360,v=v*z/360,w=Math.floor(v),x=Math.floor(u),d=4*(x*l+w),p=j[d+0],q=j[d+1],r=j[d+2],s=j[d+3],d=4*(f*l+e),k[d+0]=p,k[d+1]=q,k[d+2]=r,k[d+3]=s},c=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(d){var e,f,g,h,i,j,k,l,m,n,o=d.width,p=d.height,q=Math.round(this.kaleidoscopePower()),r=Math.round(this.kaleidoscopeAngle()),s=Math.floor(o*(r%360)/360);if(!(1>q)){c.width=o,c.height=p;var t=c.getContext(\"2d\").getImageData(0,0,o,p);a(d,t,{polarCenterX:o/2,polarCenterY:p/2});for(var u=o/Math.pow(2,q);8>=u;)u=2*u,q-=1;u=Math.ceil(u);var v=u,w=0,x=v,y=1;for(s+u>o&&(w=v,x=0,y=-1),f=0;p>f;f+=1)for(e=w;e!==x;e+=y)g=Math.round(e+s)%o,m=4*(o*f+g),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+e),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;for(f=0;p>f;f+=1)for(v=Math.floor(u),h=0;q>h;h+=1){for(e=0;v+1>e;e+=1)m=4*(o*f+e),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+2*v-e-1),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;v*=2}b(t,d,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"kaleidoscopePower\",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,\"kaleidoscopeAngle\",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a){setTimeout(a,1e3/60)}function b(){return e.apply(Kinetic.root,arguments)}var c=500,d=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),e=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||a}();Kinetic.Animation=function(a,b){var c=Kinetic.Animation;this.func=a,this.setLayers(b),this.id=c.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d()}},Kinetic.Animation.prototype={setLayers:function(a){var b=[];b=a?a.length>0?a:[a]:[],this.layers=b},getLayers:function(){return this.layers},addLayer:function(a){var b,c,d=this.layers;if(d){for(b=d.length,c=0;b>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,b=Kinetic.Animation,c=b.animations,d=c.length;for(a=0;d>a;a++)if(c[a].id===this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d(),a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(a){this.animations.push(a),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(a){var b,c=a.id,d=this.animations,e=d.length;for(b=0;e>b;b++)if(d[b].id===c){this.animations.splice(b,1);break}},Kinetic.Animation._runFrames=function(){var a,b,c,e,f,g,h,i,j,k={},l=this.animations;for(e=0;e<l.length;e++)if(a=l[e],b=a.layers,c=a.func,a._updateFrameObject(d()),g=b.length,j=c?c.call(a,a.frame)!==!1:!0)for(f=0;g>f;f++)h=b[f],void 0!==h._id&&(k[h._id]=h);for(i in k)k[i].draw()},Kinetic.Animation._animationLoop=function(){var a=Kinetic.Animation;a.animations.length?(b(a._animationLoop),a._runFrames()):a.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var a=this;this.animRunning||(this.animRunning=!0,a._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)},Kinetic.BaseLayer.prototype.batchDraw=function(){var a=this,b=Kinetic.Animation;this.batchAnim||(this.batchAnim=new b(function(){a.lastBatchDrawTime&&d()-a.lastBatchDrawTime>c&&a.batchAnim.stop()},this)),this.lastBatchDrawTime=d(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}}(this),function(){var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},b=1,c=2,d=3,e=0;Kinetic.Tween=function(b){var c,d,g=this,h=b.node,i=h._id,j=b.easing||Kinetic.Easings.Linear,k=!!b.yoyo;c=\"undefined\"==typeof b.duration?1:0===b.duration?.001:b.duration,this.node=h,this._id=e++,this.anim=new Kinetic.Animation(function(){g.tween.onEnterFrame()},h.getLayer()||(h instanceof Kinetic.Stage?h.getLayers():null)),this.tween=new f(d,function(a){g._tweenFunc(a)},j,0,1,1e3*c,k),this._addListeners(),Kinetic.Tween.attrs[i]||(Kinetic.Tween.attrs[i]={}),Kinetic.Tween.attrs[i][this._id]||(Kinetic.Tween.attrs[i][this._id]={}),Kinetic.Tween.tweens[i]||(Kinetic.Tween.tweens[i]={});for(d in b)void 0===a[d]&&this._addAttr(d,b[d]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(a,b){var c,d,e,f,g,h=this.node,i=h._id;if(e=Kinetic.Tween.tweens[i][a],e&&delete Kinetic.Tween.attrs[i][e][a],c=h.getAttr(a),Kinetic.Util._isArray(b))for(d=[],g=b.length,f=0;g>f;f++)d.push(b[f]-c[f]);else d=b-c;Kinetic.Tween.attrs[i][this._id][a]={start:c,diff:d},Kinetic.Tween.tweens[i][a]=this._id},_tweenFunc:function(a){var b,c,d,e,f,g,h,i=this.node,j=Kinetic.Tween.attrs[i._id][this._id];for(b in j){if(c=j[b],d=c.start,e=c.diff,Kinetic.Util._isArray(d))for(f=[],h=d.length,g=0;h>g;g++)f.push(d[g]+e[g]*a);else f=d+e*a;i.setAttr(b,f)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()},this.tween.onReverse=function(){a.anim.start()},this.tween.onPause=function(){a.anim.stop()},this.tween.onFinish=function(){a.onFinish&&a.onFinish()},this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.tween.reset(),this},seek:function(a){return this.tween.seek(1e3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.tween.finish(),this},destroy:function(){var a,b=this.node._id,c=this._id,d=Kinetic.Tween.tweens[b];this.pause();for(a in d)delete Kinetic.Tween.tweens[b][a];delete Kinetic.Tween.attrs[b][c]}};var f=function(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()};f.prototype={fire:function(a){var b=this[a];b&&b()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire(\"onPlay\")},reverse:function(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire(\"onReverse\")},seek:function(a){this.pause(),this._time=a,this.update(),this.fire(\"onSeek\")},reset:function(){this.pause(),this._time=0,this.update(),this.fire(\"onReset\")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire(\"onFinish\")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;this.state===c?this.setTime(a):this.state===d&&this.setTime(this.duration-a)},pause:function(){this.state=b,this.fire(\"onPause\")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},BackEaseOut:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},BackEaseInOut:function(a,b,c,d){var e=1.70158;return(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},ElasticEaseIn:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b)},ElasticEaseOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b)},ElasticEaseInOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b)},BounceEaseOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,c,d){return c-Kinetic.Easings.BounceEaseOut(d-a,0,c,d)+b},BounceEaseInOut:function(a,b,c,d){return d/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,c,d)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-d,0,c,d)+.5*c+b},EaseIn:function(a,b,c,d){return c*(a/=d)*a+b},EaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},EaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},StrongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,c,d){return c*a/d+b}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation(function(){var a=this.dirty;return this.dirty=!1,a}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,c=b.node;if(c){if(!b.isDragging){var d=c.getStage().getPointerPosition(),e=c.dragDistance(),f=Math.max(Math.abs(d.x-b.startPointerPos.x),Math.abs(d.y-b.startPointerPos.y));if(e>f)return}c._setDragPosition(a),b.isDragging||(b.isDragging=!0,c.fire(\"dragstart\",{type:\"dragstart\",target:c,evt:a},!0)),c.fire(\"dragmove\",{type:\"dragmove\",target:c,evt:a},!0)}},_endDragBefore:function(a){var b,c,d=Kinetic.DD,e=d.node;e&&(b=e.nodeType,c=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,d.justDragged=!0,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=e)),delete d.node,(c||e).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire(\"dragend\",{type:\"dragend\",target:b,evt:a},!0)}},Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),c=this.getLayer(),d=b.getPointerPosition(),e=this.getAbsolutePosition();d&&(a.node&&a.node.stopDrag(),a.node=this,a.startPointerPos=d,a.offset.x=d.x-e.x,a.offset.y=d.y-e.y,a.anim.setLayers(c||this.getLayers()),a.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,c=this.getStage().getPointerPosition(),d=this.getDragBoundFunc();if(c){var e={x:c.x-b.offset.x,y:c.y-b.offset.y};void 0!==d&&(e=d.call(this,e,a)),this.setAbsolutePosition(e),this._lastPos&&this._lastPos.x===e.x&&this._lastPos.y===e.y||(b.anim.dirty=!0),this._lastPos=e}},Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b),a._endDragAfter(b)},Kinetic.Node.prototype.setDraggable=function(a){this._setAttr(\"draggable\",a),this._dragChange()};var a=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var b=Kinetic.DD;b.node&&b.node._id===this._id&&this.stopDrag(),a.call(this)},Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return!(!a.node||a.node._id!==this._id||!a.isDragging)},Kinetic.Node.prototype._listenDrag=function(){var a=this;this._dragCleanup(),\"Stage\"===this.getClassName()?this.on(\"contentMousedown.kinetic contentTouchstart.kinetic\",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on(\"mousedown.kinetic touchstart.kinetic\",function(b){1!==b.evt.button&&2!==b.evt.button&&(Kinetic.DD.node||a.startDrag(b))})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){\"Stage\"===this.getClassName()?(this.off(\"contentMousedown.kinetic\"),this.off(\"contentTouchstart.kinetic\")):(this.off(\"mousedown.kinetic\"),this.off(\"touchstart.kinetic\"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,\"dragBoundFunc\"),Kinetic.Factory.addGetter(Kinetic.Node,\"draggable\",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,\"draggable\");var b=Kinetic.document.documentElement;b.addEventListener(\"mouseup\",Kinetic.DD._endDragBefore,!0),b.addEventListener(\"touchend\",Kinetic.DD._endDragBefore,!0),b.addEventListener(\"mouseup\",Kinetic.DD._endDragAfter,!1),b.addEventListener(\"touchend\",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(a){this.children=new Kinetic.Collection,Kinetic.Node.call(this,a)},getChildren:function(a){if(a){var b=new Kinetic.Collection;return this.children.each(function(c){a(c)&&b.push(c)}),b}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.hasChildren()&&a.removeChildren(),a.remove();return b=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.destroy();return b=null,this.children=new Kinetic.Collection,this},add:function(a){if(arguments.length>1){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a.getParent())return a.moveTo(this),this;var c=this.children;return this._validateAdd(a),a.index=c.length,a.parent=this,c.push(a),this._fire(\"add\",{child:a}),a.isDragging()&&Kinetic.DD.anim.setLayers(a.getLayer()),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(a){var b,c,d,e,f,g,h,i=[],j=a.replace(/ /g,\"\").split(\",\"),k=j.length;for(b=0;k>b;b++)if(d=j[b],\"#\"===d.charAt(0))f=this._getNodeById(d.slice(1)),f&&i.push(f);else if(\".\"===d.charAt(0))e=this._getNodesByName(d.slice(1)),i=i.concat(e);else for(g=this.getChildren(),h=g.length,c=0;h>c;c++)i=i.concat(g[c]._get(d));return Kinetic.Collection.toCollection(i)},_getNodeById:function(a){var b=Kinetic.ids[a];return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(a){var b=Kinetic.names[a]||[];return this._getDescendants(b)},_get:function(a){for(var b=Kinetic.Node.prototype._get.call(this,a),c=this.getChildren(),d=c.length,e=0;d>e;e++)b=b.concat(c[e]._get(a));return b},toObject:function(){var a=Kinetic.Node.prototype.toObject.call(this);\n        a.children=[];for(var b=this.getChildren(),c=b.length,d=0;c>d;d++){var e=b[d];a.children.push(e.toObject())}return a},_getDescendants:function(a){for(var b=[],c=a.length,d=0;c>d;d++){var e=a[d];this.isAncestorOf(e)&&b.push(e)}return b},isAncestorOf:function(a){for(var b=a.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(a){var b=Kinetic.Node.prototype.clone.call(this,a);return this.getChildren().each(function(a){b.add(a.clone())}),b},getAllIntersections:function(a){var b=[];return this.find(\"Shape\").each(function(c){c.isVisible()&&c.intersects(a)&&b.push(c)}),b},_setChildrenIndices:function(){this.children.each(function(a,b){a.index=b})},drawScene:function(a,b){var c=this.getLayer(),d=a||c&&c.getCanvas(),e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.scene;return this.isVisible()&&(g?this._drawCachedSceneCanvas(e):this._drawChildren(d,\"drawScene\",b)),this},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas,e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.hit;return this.shouldDrawHit(d)&&(c&&c.clearHitCache(),g?this._drawCachedHitCanvas(e):this._drawChildren(d,\"drawHit\",b)),this},_drawChildren:function(a,b,c){var d,e,f=this.getLayer(),g=a&&a.getContext(),h=this.getClipWidth(),i=this.getClipHeight(),j=h&&i;j&&f&&(d=this.getClipX(),e=this.getClipY(),g.save(),f._applyTransform(this,g),g.beginPath(),g.rect(d,e,h,i),g.clip(),g.reset()),this.children.each(function(d){d[b](a,c)}),j&&g.restore()},shouldDrawHit:function(a){var b=this.getLayer(),c=Kinetic.DD,d=c&&Kinetic.isDragging()&&-1!==Kinetic.DD.anim.getLayers().indexOf(b);return a&&a.isCache||b&&b.hitGraphEnabled()&&this.isVisible()&&!d}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,\"clip\",[\"x\",\"y\",\"width\",\"height\"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,\"clipX\"),Kinetic.Factory.addGetterSetter(Kinetic.Container,\"clipY\"),Kinetic.Factory.addGetterSetter(Kinetic.Container,\"clipWidth\"),Kinetic.Factory.addGetterSetter(Kinetic.Container,\"clipHeight\"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function a(a){a.fill()}function b(a){a.stroke()}function c(a){a.fill()}function d(a){a.stroke()}function e(){this._clearCache(f)}var f=\"hasShadow\";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(f){this.nodeType=\"Shape\",this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=c,this._strokeFuncHit=d;for(var g,h=Kinetic.shapes;;)if(g=Kinetic.Util.getRandomColor(),g&&!(g in h))break;this.colorKey=g,h[g]=this,Kinetic.Node.call(this,f),this.on(\"shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic\",e)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(f,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},intersects:function(a){var b,c=this.getStage(),d=c.bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,b[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,b){var c,d,e,f=this.getLayer(),g=a||f.getCanvas(),h=g.getContext(),i=this._cache.canvas,j=this.sceneFunc(),k=this.hasShadow();if(this.isVisible())if(i)this._drawCachedSceneCanvas(h);else if(j){if(h.save(),this._useBufferCanvas()){if(c=this.getStage(),d=c.bufferCanvas,e=d.getContext(),e.clear(),e.save(),e._applyLineJoin(this),f)f._applyTransform(this,e,b);else{var l=this.getAbsoluteTransform(b).getMatrix();h.transform(l[0],l[1],l[2],l[3],l[4],l[5])}j.call(this,e),e.restore(),k&&!g.hitCanvas&&(h.save(),h._applyShadow(this),h.drawImage(d._canvas,0,0),h.restore()),h._applyOpacity(this),h.drawImage(d._canvas,0,0)}else{if(h._applyLineJoin(this),f)f._applyTransform(this,h,b);else{var m=this.getAbsoluteTransform(b).getMatrix();h.transform(m[0],m[1],m[2],m[3],m[4],m[5])}k&&!g.hitCanvas&&(h.save(),h._applyShadow(this),j.call(this,h),h.restore()),h._applyOpacity(this),j.call(this,h)}h.restore()}return this},drawHit:function(a,b){var c=this.getLayer(),d=a||c.hitCanvas,e=d.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._cache.canvas,h=g&&g.hit;if(this.shouldDrawHit(d))if(c&&c.clearHitCache(),h)this._drawCachedHitCanvas(e);else if(f){if(e.save(),e._applyLineJoin(this),c)c._applyTransform(this,e,b);else{var i=this.getAbsoluteTransform(b).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}f.call(this,e),e.restore()}return this},drawHitFromCache:function(a){var b,c,d,e,f,g,h,i,j=a||0,k=this._cache.canvas,l=this._getCachedSceneCanvas(),m=l.getContext(),n=k.hit,o=n.getContext(),p=l.getWidth(),q=l.getHeight();o.clear();try{for(b=m.getImageData(0,0,p,q),c=b.data,d=o.getImageData(0,0,p,q),e=d.data,f=c.length,g=Kinetic.Util._hexToRgb(this.colorKey),h=0;f>h;h+=4)i=c[h+3],i>j&&(e[h]=g.r,e[h+1]=g.g,e[h+2]=g.b,e[h+3]=255);o.putImageData(d,0,0)}catch(r){Kinetic.Util.warn(\"Unable to draw hit graph from cached scene canvas. \"+r.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"stroke\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeRed\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeGreen\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeBlue\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeAlpha\",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeWidth\",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"lineJoin\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"lineCap\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"sceneFunc\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"hitFunc\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"dash\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowColor\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowRed\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowGreen\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowBlue\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowAlpha\",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowBlur\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowOpacity\"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"shadowOffset\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowOffsetX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowOffsetY\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternImage\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fill\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRed\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillGreen\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillBlue\",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillAlpha\",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternY\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillLinearGradientColorStops\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientStartRadius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientEndRadius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientColorStops\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternRepeat\",\"repeat\"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillEnabled\",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeEnabled\",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"shadowEnabled\",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"dashEnabled\",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"strokeScaleEnabled\",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPriority\",\"color\"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillPatternOffset\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternOffsetX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternOffsetY\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillPatternScale\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternScaleX\",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternScaleY\",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillLinearGradientStartPoint\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillLinearGradientStartPointX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillLinearGradientStartPointY\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillLinearGradientEndPoint\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillLinearGradientEndPointX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillLinearGradientEndPointY\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillRadialGradientStartPoint\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientStartPointX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientStartPointY\",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,\"fillRadialGradientEndPoint\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientEndPointX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillRadialGradientEndPointY\",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,\"fillPatternRotation\",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:\"dash\",getDashArray:\"getDash\",setDashArray:\"getDash\",drawFunc:\"sceneFunc\",getDrawFunc:\"getSceneFunc\",setDrawFunc:\"setSceneFunc\",drawHitFunc:\"hitFunc\",getDrawHitFunc:\"getHitFunc\",setDrawHitFunc:\"setHitFunc\"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function a(a,b){a.content.addEventListener(b,function(c){a[L+b](c)},!1)}var b=\"Stage\",c=\"string\",d=\"px\",e=\"mouseout\",f=\"mouseleave\",g=\"mouseover\",h=\"mouseenter\",i=\"mousemove\",j=\"mousedown\",k=\"mouseup\",l=\"click\",m=\"dblclick\",n=\"touchstart\",o=\"touchend\",p=\"tap\",q=\"dbltap\",r=\"touchmove\",s=\"DOMMouseScroll\",t=\"mousewheel\",u=\"wheel\",v=\"contentMouseout\",w=\"contentMouseover\",x=\"contentMousemove\",y=\"contentMousedown\",z=\"contentMouseup\",A=\"contentClick\",B=\"contentDblclick\",C=\"contentTouchstart\",D=\"contentTouchend\",E=\"contentDbltap\",F=\"contentTouchmove\",G=\"div\",H=\"relative\",I=\"inline-block\",J=\"kineticjs-content\",K=\" \",L=\"_\",M=\"container\",N=\"\",O=[j,i,k,e,n,r,o,g,s,t,u],P=O.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType=b,Kinetic.Container.call(this,a),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(a){\"Layer\"!==a.getType()&&Kinetic.Util.error(\"You may only add layers to the stage.\")},setContainer:function(a){if(typeof a===c){var b=a;if(a=Kinetic.document.getElementById(a),!a)throw\"Can not find container in document with id \"+b}return this._setAttr(M,a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,b=this.children,c=b.length;for(a=0;c>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement(G),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this),a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);var b=Kinetic.stages.indexOf(this);b>-1&&Kinetic.stages.splice(b,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(a){function b(e){var f=i[e],j=f.toDataURL(),k=new Kinetic.window.Image;k.onload=function(){h.drawImage(k,0,0),e<i.length-1?b(e+1):a.callback(g.toDataURL(c,d))},k.src=j}a=a||{};var c=a.mimeType||null,d=a.quality||null,e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),h=g.getContext()._context,i=this.children;(e||f)&&h.translate(-1*e,-1*f),b(0)},toImage:function(a){var b=a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})},this.toDataURL(a)},getIntersection:function(a){var b,c,d=this.getChildren(),e=d.length,f=e-1;for(b=f;b>=0;b--)if(c=d[b].getIntersection(a))return c;return null},_resizeDOM:function(){if(this.content){var a,b,c=this.getWidth(),e=this.getHeight(),f=this.getChildren(),g=f.length;for(this.content.style.width=c+d,this.content.style.height=e+d,this.bufferCanvas.setSize(c,e),this.bufferHitCanvas.setSize(c,e),a=0;g>a;a++)b=f[a],b.setSize(c,e),b.draw()}},add:function(a){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var b=0;P>b;b++)a(this,O[b])},_mouseover:function(a){Kinetic.UA.mobile||(this._setPointerPosition(a),this._fire(w,{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble(e,{evt:a}),b._fireAndBubble(f,{evt:a}),this.targetShape=null),this.pointerPos=void 0,this._fire(v,{evt:a})}},_mousemove:function(a){if(Kinetic.UA.ieMobile)return this._touchmove(a);if((\"undefined\"==typeof a.webkitMovementX&&\"undefined\"==typeof a.webkitMovementY||0!==a.webkitMovementY||0!==a.webkitMovementX)&&!Kinetic.UA.mobile){this._setPointerPosition(a);var b,c=Kinetic.DD;Kinetic.isDragging()||(b=this.getIntersection(this.getPointerPosition()),b&&b.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===b._id?b._fireAndBubble(i,{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble(e,{evt:a},b),this.targetShape._fireAndBubble(f,{evt:a},b)),b._fireAndBubble(g,{evt:a},this.targetShape),b._fireAndBubble(h,{evt:a},this.targetShape),this.targetShape=b):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(e,{evt:a}),this.targetShape._fireAndBubble(f,{evt:a}),this.targetShape=null),this._fire(x,{evt:a})),c&&c._drag(a),a.preventDefault&&a.preventDefault()}},_mousedown:function(a){if(Kinetic.UA.ieMobile)return this._touchstart(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.clickStartShape=b,b._fireAndBubble(j,{evt:a})),this._fire(y,{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(Kinetic.UA.ieMobile)return this._touchend(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=this.clickStartShape,d=!1,e=Kinetic.DD;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):e&&e.justDragged?e&&(e.justDragged=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(k,{evt:a}),Kinetic.listenClickTap&&c&&c._id===b._id&&(b._fireAndBubble(l,{evt:a}),d&&b._fireAndBubble(m,{evt:a}))),this._fire(z,{evt:a}),Kinetic.listenClickTap&&(this._fire(A,{evt:a}),d&&this._fire(B,{evt:a})),Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.tapStartShape=b,b._fireAndBubble(n,{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(C,{evt:a})},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=!1;Kinetic.inDblClickWindow?(c=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(o,{evt:a}),Kinetic.listenClickTap&&b._id===this.tapStartShape._id&&(b._fireAndBubble(p,{evt:a}),c&&b._fireAndBubble(q,{evt:a})),b.isListening()&&a.preventDefault&&a.preventDefault()),Kinetic.listenClickTap&&(this._fire(D,{evt:a}),c&&this._fire(E,{evt:a})),Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b,c=Kinetic.DD;Kinetic.isDragging()||(b=this.getIntersection(this.getPointerPosition()),b&&b.isListening()&&(b._fireAndBubble(r,{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(F,{evt:a})),c&&(c._drag(a),Kinetic.isDragging()&&a.preventDefault())},_DOMMouseScroll:function(a){this._mousewheel(a)},_mousewheel:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());b&&b.isListening()&&b._fireAndBubble(t,{evt:a})},_wheel:function(a){this._mousewheel(a)},_setPointerPosition:function(a){var b,c=this._getContentPosition(),d=a.offsetX,e=a.clientX,f=null,g=null;a=a?a:window.event,void 0!==a.touches?a.touches.length>0&&(b=a.touches[0],f=b.clientX-c.left,g=b.clientY-c.top):void 0!==d?(f=d,g=a.offsetY):\"mozilla\"===Kinetic.UA.browser?(f=a.layerX,g=a.layerY):void 0!==e&&c&&(f=e-c.left,g=a.clientY-c.top),null!==f&&null!==g&&(this.pointerPos={x:f,y:g})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw\"Stage has no container. A container is required.\";a=Kinetic.document.createElement(G)}a.innerHTML=N,this.content=Kinetic.document.createElement(G),this.content.style.position=H,this.content.style.display=I,this.content.className=J,this.content.setAttribute(\"role\",\"presentation\"),a.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(a,b){var c,d,e=a.split(K),f=e.length;for(c=0;f>c;c++)d=e[c],this.content.addEventListener(d,b,!1)},cache:function(){Kinetic.Util.warn(\"Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.\")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,\"container\"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,\"container\")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(a){this.nodeType=\"Layer\",Kinetic.Container.call(this,a)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},clearHitCache:function(){this._hitImageData=void 0},setZIndex:function(a){Kinetic.Node.prototype.setZIndex.call(this,a);var b=this.getStage();return b&&(b.content.removeChild(this.getCanvas()._canvas),a<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[a+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),a.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),this.index<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var a=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),a&&a.parentNode&&Kinetic.Util._isInDocument(a)&&a.parentNode.removeChild(a),this},getStage:function(){return this.parent},setSize:function(a,b){this.canvas.setSize(a,b)},getWidth:function(){return this.parent?this.parent.getWidth():void 0},setWidth:function(){Kinetic.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.')},getHeight:function(){return this.parent?this.parent.getHeight():void 0},setHeight:function(){Kinetic.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.')}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,\"clearBeforeDraw\",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var a=\"#\",b=\"beforeDraw\",c=\"draw\",d=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],e=d.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(a){this.nodeType=\"Layer\",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,a)},_setCanvasSize:function(a,b){this.canvas.setSize(a,b),this.hitCanvas.setSize(a,b)},_validateAdd:function(a){var b=a.getType();\"Group\"!==b&&\"Shape\"!==b&&Kinetic.Util.error(\"You may only add groups and shapes to a layer.\")},getIntersection:function(a){var b,c,f,g;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var h=1,i=!1;;){for(c=0;e>c;c++){if(f=d[c],b=this._getIntersection({x:a.x+f.x*h,y:a.y+f.y*h}),g=b.shape)return g;b.antialiased&&(i=!0)}if(!i)return;h+=1}},_getImageData:function(a,b){var c=this.hitCanvas.width||1,d=this.hitCanvas.height||1,e=Math.round(b)*c+Math.round(a);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,c,d)),[this._hitImageData.data[4*e+0],this._hitImageData.data[4*e+1],this._hitImageData.data[4*e+2],this._hitImageData.data[4*e+3]]},_getIntersection:function(b){var c,d,e=this.hitCanvas.context.getImageData(b.x,b.y,1,1).data,f=e[3];return 255===f?(c=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),d=Kinetic.shapes[a+c],{shape:d}):f>0?{antialiased:!0}:{}},drawScene:function(a,d){var e=this.getLayer(),f=a||e&&e.getCanvas();return this._fire(b,{node:this}),this.getClearBeforeDraw()&&f.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,f,d),this._fire(c,{node:this}),this},_applyTransform:function(a,b,c){var d=a.getAbsoluteTransform(c).getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas;return c&&c.getClearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,d,b),this.imageData=null,this},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this.imageData=null,this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),a?(this.getCanvas()._canvas.style.display=\"block\",this.hitCanvas._canvas.style.display=\"block\"):(this.getCanvas()._canvas.style.display=\"none\",this.hitCanvas._canvas.style.display=\"none\"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(a,b){Kinetic.BaseLayer.prototype.setSize.call(this,a,b),this.hitCanvas.setSize(a,b)}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,\"hitGraphEnabled\",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(a){this.nodeType=\"Layer\",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,a)},_validateAdd:function(a){var b=a.getType();\"Shape\"!==b&&Kinetic.Util.error(\"You may only add shapes to a fast layer.\")},_setCanvasSize:function(a,b){this.canvas.setSize(a,b)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(a){var b=this.getLayer(),c=a||b&&b.getCanvas();return this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c),this},_applyTransform:function(a,b,c){if(!c||c._id!==this._id){var d=a.getTransform().getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])}},draw:function(){return this.drawScene(),this},clear:function(a){return this.getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),this.getCanvas()._canvas.style.display=a?\"block\":\"none\",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(a){this.nodeType=\"Group\",Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();\"Group\"!==b&&\"Shape\"!==b&&Kinetic.Util.error(\"You may only add groups and shapes to groups.\")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(a){this.___init(a)},Kinetic.Rect.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Rect\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getCornerRadius(),c=this.getWidth(),d=this.getHeight();a.beginPath(),b?(a.moveTo(b,0),a.lineTo(c-b,0),a.arc(c-b,b,b,3*Math.PI/2,0,!1),a.lineTo(c,d-b),a.arc(c-b,d-b,b,0,Math.PI/2,!1),a.lineTo(b,d),a.arc(b,d-b,b,Math.PI/2,Math.PI,!1),a.lineTo(0,b),a.arc(b,b,b,Math.PI,3*Math.PI/2,!1)):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,\"cornerRadius\",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var a=2*Math.PI-1e-4,b=\"Circle\";Kinetic.Circle=function(a){this.___init(a)},Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,a,!1),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.radius()!==a/2&&this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.radius()!==a/2&&this.setRadius(a/2)},setRadius:function(a){this._setAttr(\"radius\",a),this.setWidth(2*a),this.setHeight(2*a)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetter(Kinetic.Circle,\"radius\",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Circle,\"radius\"),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var a=2*Math.PI-1e-4,b=\"Ellipse\";Kinetic.Ellipse=function(a){this.___init(a)},Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var c=this.getRadiusX(),d=this.getRadiusY();b.beginPath(),b.save(),c!==d&&b.scale(1,d/c),b.arc(0,0,c,0,a,!1),b.restore(),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius({y:a/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,\"radius\",[\"x\",\"y\"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,\"radiusX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,\"radiusY\",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var a=2*Math.PI-1e-4;Kinetic.Ring=function(a){this.___init(a)},Kinetic.Ring.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Ring\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getInnerRadius(),0,a,!1),b.moveTo(this.getOuterRadius(),0),b.arc(0,0,this.getOuterRadius(),a,0,!0),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.outerRadius()!==a/2&&this.setOuterRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.outerRadius()!==a/2&&this.setOuterRadius(a/2)},setOuterRadius:function(a){this._setAttr(\"outerRadius\",a),this.setWidth(2*a),this.setHeight(2*a)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,\"innerRadius\",0),Kinetic.Factory.addGetter(Kinetic.Ring,\"outerRadius\",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Ring,\"outerRadius\"),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(a){this.___init(a)},Kinetic.Wedge.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Wedge\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,\"radius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,\"angle\",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,\"clockwise\",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:\"angle\",getAngleDeg:\"getAngle\",setAngleDeg:\"setAngle\"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Kinetic.Arc=function(a){this.___init(a)},Kinetic.Arc.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Arc\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=Kinetic.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.getOuterRadius(),0,b,c),a.arc(0,0,this.getInnerRadius(),b,0,!c),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,\"innerRadius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,\"outerRadius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,\"angle\",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,\"clockwise\",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var a=\"Image\";Kinetic.Image=function(a){this.___init(a)},Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=a,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(a){var b,c,d,e=this.getWidth(),f=this.getHeight(),g=this.getImage();g&&(b=this.getCropWidth(),c=this.getCropHeight(),d=b&&c?[g,this.getCropX(),this.getCropY(),b,c,0,0,e,f]:[g,0,0,e,f]),(this.hasFill()||this.hasStroke()||this.hasShadow())&&(a.beginPath(),a.rect(0,0,e,f),a.closePath(),a.fillStrokeShape(this)),g&&a.drawImage.apply(a,d)\n    },_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},getWidth:function(){var a=this.getImage();return this.attrs.width||(a?a.width:0)},getHeight:function(){var a=this.getImage();return this.attrs.height||(a?a.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,\"image\"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,\"crop\",[\"x\",\"y\",\"width\",\"height\"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,\"cropX\",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,\"cropY\",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,\"cropWidth\",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,\"cropHeight\",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c=\"auto\",d=\"center\",e=\"Change.kinetic\",f=\"2d\",g=\"-\",h=\"\",i=\"left\",j=\"text\",k=\"Text\",l=\"middle\",m=\"normal\",n=\"px \",o=\" \",p=\"right\",q=\"word\",r=\"char\",s=\"none\",t=[\"fontFamily\",\"fontSize\",\"fontStyle\",\"fontVariant\",\"padding\",\"align\",\"lineHeight\",\"text\",\"width\",\"height\",\"wrap\"],u=t.length,v=Kinetic.Util.createCanvasElement().getContext(f);Kinetic.Text=function(a){this.___init(a)},Kinetic.Text.prototype={___init:function(d){d=d||{},d.fill=d.fill||\"black\",void 0===d.width&&(d.width=c),void 0===d.height&&(d.height=c),Kinetic.Shape.call(this,d),this._fillFunc=a,this._strokeFunc=b,this.className=k;for(var f=0;u>f;f++)this.on(t[f]+e,this._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b,c=this.getPadding(),e=this.getTextHeight(),f=this.getLineHeight()*e,g=this.textArr,h=g.length,j=this.getWidth();for(a.setAttr(\"font\",this._getContextFont()),a.setAttr(\"textBaseline\",l),a.setAttr(\"textAlign\",i),a.save(),a.translate(c,0),a.translate(0,c+e/2),b=0;h>b;b++){var k=g[b],m=k.text,n=k.width;a.save(),this.getAlign()===p?a.translate(j-n-2*c,0):this.getAlign()===d&&a.translate((j-n-2*c)/2,0),this.partialText=m,a.fillStrokeShape(this),a.restore(),a.translate(0,f)}a.restore()},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},setText:function(a){var b=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr(j,b),this},getWidth:function(){return this.attrs.width===c?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===c?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,c=v,d=this.getFontSize();return c.save(),c.font=this._getContextFont(),b=c.measureText(a),c.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+o+this.getFontVariant()+o+this.getFontSize()+n+this.getFontFamily()},_addTextLine:function(a,b){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return v.measureText(a).width},_setTextData:function(){var a=this.getText().split(\"\\n\"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,f=this.attrs.width,h=this.attrs.height,i=f!==c,j=h!==c,k=this.getPadding(),l=f-2*k,m=h-2*k,n=0,p=this.getWrap(),q=p!==s,t=p!==r&&q;this.textArr=[],v.save(),v.font=this._getContextFont();for(var u=0,w=a.length;w>u;++u){var x=a[u],y=this._getTextWidth(x);if(i&&y>l)for(;x.length>0;){for(var z=0,A=x.length,B=\"\",C=0;A>z;){var D=z+A>>>1,E=x.slice(0,D+1),F=this._getTextWidth(E);l>=F?(z=D+1,B=E,C=F):A=D}if(!B)break;if(t){var G=Math.max(B.lastIndexOf(o),B.lastIndexOf(g))+1;G>0&&(z=G,B=B.slice(0,z),C=this._getTextWidth(B))}if(this._addTextLine(B,C),d=Math.max(d,C),n+=e,!q||j&&n+e>m)break;if(x=x.slice(z),x.length>0&&(y=this._getTextWidth(x),l>=y)){this._addTextLine(x,y),n+=e,d=Math.max(d,y);break}}else this._addTextLine(x,y),n+=e,d=Math.max(d,y);if(j&&n+e>m)break}v.restore(),this.textHeight=b,this.textWidth=d}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"fontFamily\",\"Arial\"),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"fontSize\",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"fontStyle\",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"fontVariant\",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"padding\",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"align\",i),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"lineHeight\",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,\"wrap\",q),Kinetic.Factory.addGetter(Kinetic.Text,\"text\",h),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,\"text\"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(a){this.___init(a)},Kinetic.Line.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Line\",this.on(\"pointsChange.kinetic tensionChange.kinetic closedChange.kinetic\",function(){this._clearCache(\"tensionPoints\")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.getPoints(),f=e.length,g=this.getTension(),h=this.getClosed();if(f){if(a.beginPath(),a.moveTo(e[0],e[1]),0!==g&&f>4){for(b=this.getTensionPoints(),c=b.length,d=h?0:4,h||a.quadraticCurveTo(b[0],b[1],b[2],b[3]);c-2>d;)a.bezierCurveTo(b[d++],b[d++],b[d++],b[d++],b[d++],b[d++]);h||a.quadraticCurveTo(b[c-2],b[c-1],e[f-2],e[f-1])}else for(d=2;f>d;d+=2)a.lineTo(e[d],e[d+1]);h?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)}},getTensionPoints:function(){return this._getCache(\"tensionPoints\",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var a=this.getPoints(),b=a.length,c=this.getTension(),d=Kinetic.Util,e=d._getControlPoints(a[b-2],a[b-1],a[0],a[1],a[2],a[3],c),f=d._getControlPoints(a[b-4],a[b-3],a[b-2],a[b-1],a[0],a[1],c),g=Kinetic.Util._expandPoints(a,c),h=[e[2],e[3]].concat(g).concat([f[0],f[1],a[b-2],a[b-1],f[2],f[3],e[0],e[1],a[0],a[1]]);return h}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,\"closed\",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,\"tension\",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,\"points\",[]),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(a){this.___init(a)},Kinetic.Sprite.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Sprite\",this._updated=!0;var b=this;this.anim=new Kinetic.Animation(function(){var a=b._updated;return b._updated=!1,a}),this.on(\"animationChange.kinetic\",function(){this.frameIndex(0)}),this.on(\"frameIndexChange.kinetic\",function(){this._updated=!0}),this.on(\"frameRateChange.kinetic\",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=this.frameOffsets(),g=e[d+0],h=e[d+1],i=e[d+2],j=e[d+3],k=this.getImage();if(k)if(f){var l=f[b],m=2*c;a.drawImage(k,g,h,i,j,l[m+0],l[m+1],i,j)}else a.drawImage(k,g,h,i,j,0,0,i,j)},_hitFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=this.frameOffsets(),g=e[d+2],h=e[d+3];if(a.beginPath(),f){var i=f[b],j=2*c;a.rect(i[j+0],i[j+1],g,h)}else a.rect(0,0,g,h);a.closePath(),a.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.getFrameRate())},start:function(){var a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var a=this.frameIndex(),b=this.getAnimation(),c=this.getAnimations(),d=c[b],e=d.length/4;this.frameIndex(e-1>a?a+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"animation\"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"animations\"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"frameOffsets\"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"image\"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"frameIndex\",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,\"frameRate\",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:\"frameIndex\",getIndex:\"getFrameIndex\",setIndex:\"setFrameIndex\"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(a){this.___init(a)},Kinetic.Path.prototype={___init:function(a){this.dataArray=[];var b=this;Kinetic.Shape.call(this,a),this.className=\"Path\",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on(\"dataChange.kinetic\",function(){b.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.dataArray,c=!1;a.beginPath();for(var d=0;d<b.length;d++){var e=b[d].command,f=b[d].points;switch(e){case\"L\":a.lineTo(f[0],f[1]);break;case\"M\":a.moveTo(f[0],f[1]);break;case\"C\":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case\"Q\":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case\"A\":var g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case\"z\":a.closePath(),c=!0}}c?a.fillStrokeShape(this):a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Kinetic.Path.getPointOnLine=function(a,b,c,d,e,f,g){void 0===f&&(f=b),void 0===g&&(g=c);var h=(e-c)/(d-b+1e-8),i=Math.sqrt(a*a/(1+h*h));b>d&&(i*=-1);var j,k=h*i;if(d===b)j={x:f,y:g+k};else if((g-c)/(f-b+1e-8)===h)j={x:f+i,y:g+k};else{var l,m,n=this.getLineLength(b,c,d,e);if(1e-8>n)return void 0;var o=(f-b)*(d-b)+(g-c)*(e-c);o/=n*n,l=b+o*(d-b),m=c+o*(e-c);var p=this.getLineLength(f,g,l,m),q=Math.sqrt(a*a-p*p);i=Math.sqrt(q*q/(1+h*h)),b>d&&(i*=-1),k=h*i,j={x:l+i,y:m+k}}return j},Kinetic.Path.getPointOnCubicBezier=function(a,b,c,d,e,f,g,h,i){function j(a){return a*a*a}function k(a){return 3*a*a*(1-a)}function l(a){return 3*a*(1-a)*(1-a)}function m(a){return(1-a)*(1-a)*(1-a)}var n=h*j(a)+f*k(a)+d*l(a)+b*m(a),o=i*j(a)+g*k(a)+e*l(a)+c*m(a);return{x:n,y:o}},Kinetic.Path.getPointOnQuadraticBezier=function(a,b,c,d,e,f,g){function h(a){return a*a}function i(a){return 2*a*(1-a)}function j(a){return(1-a)*(1-a)}var k=f*h(a)+d*i(a)+b*j(a),l=g*h(a)+e*i(a)+c*j(a);return{x:k,y:l}},Kinetic.Path.getPointOnEllipticalArc=function(a,b,c,d,e,f){var g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}},Kinetic.Path.parsePathData=function(a){if(!a)return[];var b=a,c=[\"m\",\"M\",\"l\",\"L\",\"v\",\"V\",\"h\",\"H\",\"z\",\"Z\",\"c\",\"C\",\"q\",\"Q\",\"t\",\"T\",\"s\",\"S\",\"a\",\"A\"];b=b.replace(new RegExp(\" \",\"g\"),\",\");for(var d=0;d<c.length;d++)b=b.replace(new RegExp(c[d],\"g\"),\"|\"+c[d]);var e=b.split(\"|\"),f=[],g=0,h=0;for(d=1;d<e.length;d++){var i=e[d],j=i.charAt(0);i=i.slice(1),i=i.replace(new RegExp(\",-\",\"g\"),\"-\"),i=i.replace(new RegExp(\"-\",\"g\"),\",-\"),i=i.replace(new RegExp(\"e,-\",\"g\"),\"e-\");var k=i.split(\",\");k.length>0&&\"\"===k[0]&&k.shift();for(var l=0;l<k.length;l++)k[l]=parseFloat(k[l]);for(;k.length>0&&!isNaN(k[0]);){var m,n,o,p,q,r,s,t,u,v,w=null,x=[],y=g,z=h;switch(j){case\"l\":g+=k.shift(),h+=k.shift(),w=\"L\",x.push(g,h);break;case\"L\":g=k.shift(),h=k.shift(),x.push(g,h);break;case\"m\":var A=k.shift(),B=k.shift();if(g+=A,h+=B,w=\"M\",f.length>2&&\"z\"===f[f.length-1].command)for(var C=f.length-2;C>=0;C--)if(\"M\"===f[C].command){g=f[C].points[0]+A,h=f[C].points[1]+B;break}x.push(g,h),j=\"l\";break;case\"M\":g=k.shift(),h=k.shift(),w=\"M\",x.push(g,h),j=\"L\";break;case\"h\":g+=k.shift(),w=\"L\",x.push(g,h);break;case\"H\":g=k.shift(),w=\"L\",x.push(g,h);break;case\"v\":h+=k.shift(),w=\"L\",x.push(g,h);break;case\"V\":h=k.shift(),w=\"L\",x.push(g,h);break;case\"C\":x.push(k.shift(),k.shift(),k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case\"c\":x.push(g+k.shift(),h+k.shift(),g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w=\"C\",x.push(g,h);break;case\"S\":n=g,o=h,m=f[f.length-1],\"C\"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,k.shift(),k.shift()),g=k.shift(),h=k.shift(),w=\"C\",x.push(g,h);break;case\"s\":n=g,o=h,m=f[f.length-1],\"C\"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w=\"C\",x.push(g,h);break;case\"Q\":x.push(k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case\"q\":x.push(g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w=\"Q\",x.push(g,h);break;case\"T\":n=g,o=h,m=f[f.length-1],\"Q\"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g=k.shift(),h=k.shift(),w=\"Q\",x.push(n,o,g,h);break;case\"t\":n=g,o=h,m=f[f.length-1],\"Q\"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g+=k.shift(),h+=k.shift(),w=\"Q\",x.push(n,o,g,h);break;case\"A\":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g=k.shift(),h=k.shift(),w=\"A\",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r);break;case\"a\":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g+=k.shift(),h+=k.shift(),w=\"A\",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r)}f.push({command:w||j,points:x,start:{x:y,y:z},pathLength:this.calcLength(y,z,w||j,x)})}(\"z\"===j||\"Z\"===j)&&f.push({command:\"z\",points:[],start:void 0,pathLength:0})}return f},Kinetic.Path.calcLength=function(a,b,c,d){var e,f,g,h,i=Kinetic.Path;switch(c){case\"L\":return i.getLineLength(a,b,d[0],d[1]);case\"C\":for(e=0,f=i.getPointOnCubicBezier(0,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),h=.01;1>=h;h+=.01)g=i.getPointOnCubicBezier(h,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case\"Q\":for(e=0,f=i.getPointOnQuadraticBezier(0,a,b,d[0],d[1],d[2],d[3]),h=.01;1>=h;h+=.01)g=i.getPointOnQuadraticBezier(h,a,b,d[0],d[1],d[2],d[3]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case\"A\":e=0;var j=d[4],k=d[5],l=d[4]+k,m=Math.PI/180;if(Math.abs(j-l)<m&&(m=Math.abs(j-l)),f=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],j,0),0>k)for(h=j-m;h>l;h-=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(h=j+m;l>h;h+=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],l,0),e+=i.getLineLength(f.x,f.y,g.x,g.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(a,b,c,d,e,f,g,h,i){var j=i*(Math.PI/180),k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));var n=Math.sqrt((g*g*h*h-g*g*l*l-h*h*k*k)/(g*g*l*l+h*h*k*k));e===f&&(n*=-1),isNaN(n)&&(n=0);var o=n*g*l/h,p=n*-h*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return t(w,x)<=-1&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1===f&&0>y&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]},Kinetic.Factory.addGetterSetter(Kinetic.Path,\"data\"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c=\"\",d=\"normal\";Kinetic.TextPath=function(a){this.___init(a)},Kinetic.TextPath.prototype={___init:function(c){var d=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,c),this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=a,this._strokeFuncHit=b,this.className=\"TextPath\",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on(\"dataChange.kinetic\",function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on(\"textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic\",d._setTextData),d._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.setAttr(\"font\",this._getContextFont()),a.setAttr(\"textBaseline\",\"middle\"),a.setAttr(\"textAlign\",\"left\"),a.save();for(var b=this.glyphInfo,c=0;c<b.length;c++){a.save();var d=b[c].p0;a.translate(d.x,d.y),a.rotate(b[c].rotation),this.partialText=b[c].text,a.fillStrokeShape(this),a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas,c=b.getContext(\"2d\");c.save(),c.font=this._getContextFont();var d=c.measureText(a);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width,this.textHeight=b.height,this.glyphInfo=[];for(var c,d,e,f=this.attrs.text.split(\"\"),g=-1,h=0,i=function(){h=0;for(var b=a.dataArray,d=g+1;d<b.length;d++){if(b[d].pathLength>0)return g=d,b[d];\"M\"==b[d].command&&(c={x:b[d].points[0],y:b[d].points[1]})}return{}},j=function(b){var f=a._getTextSize(b).width,g=0,j=0;for(d=void 0;Math.abs(f-g)/f>.01&&25>j;){j++;for(var k=g;void 0===e;)e=i(),e&&k+e.pathLength<f&&(k+=e.pathLength,e=void 0);if(e==={}||void 0===c)return void 0;var l=!1;switch(e.command){case\"L\":Kinetic.Path.getLineLength(c.x,c.y,e.points[0],e.points[1])>f?d=Kinetic.Path.getPointOnLine(f,c.x,c.y,e.points[0],e.points[1],c.x,c.y):e=void 0;break;case\"A\":var m=e.points[4],n=e.points[5],o=e.points[4]+n;0===h?h=m+1e-8:f>g?h+=Math.PI/180*n/Math.abs(n):h-=Math.PI/360*n/Math.abs(n),(0>n&&o>h||n>=0&&h>o)&&(h=o,l=!0),d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],h,e.points[6]);break;case\"C\":0===h?h=f>e.pathLength?1e-8:f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnCubicBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case\"Q\":0===h?h=f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnQuadraticBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(g=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y)),l&&(l=!1,e=void 0)}},k=0;k<f.length&&(j(f[k]),void 0!==c&&void 0!==d);k++){var l=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y),m=0,n=Kinetic.Path.getPointOnLine(m+l/2,c.x,c.y,d.x,d.y),o=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:n.x,transposeY:n.y,text:f[k],rotation:o,p0:c,p1:d}),c=d}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,\"fontFamily\",\"Arial\"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,\"fontSize\",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,\"fontStyle\",d),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,\"fontVariant\",d),Kinetic.Factory.addGetter(Kinetic.TextPath,\"text\",c),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(a){this.___init(a)},Kinetic.RegularPolygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"RegularPolygon\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.attrs.sides,f=this.attrs.radius;for(a.beginPath(),a.moveTo(0,0-f),b=1;e>b;b++)c=f*Math.sin(2*b*Math.PI/e),d=-1*f*Math.cos(2*b*Math.PI/e),a.lineTo(c,d);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,\"radius\",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,\"sides\",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(a){this.___init(a)},Kinetic.Star.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Star\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(var e=1;2*d>e;e++){var f=e%2===0?c:b,g=f*Math.sin(e*Math.PI/d),h=-1*f*Math.cos(e*Math.PI/d);a.lineTo(g,h)}a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,\"numPoints\",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,\"innerRadius\",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,\"outerRadius\",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var a=[\"fontFamily\",\"fontSize\",\"fontStyle\",\"padding\",\"lineHeight\",\"text\"],b=\"Change.kinetic\",c=\"none\",d=\"up\",e=\"right\",f=\"down\",g=\"left\",h=\"Label\",i=a.length;Kinetic.Label=function(a){this.____init(a)},Kinetic.Label.prototype={____init:function(a){var b=this;Kinetic.Group.call(this,a),this.className=h,this.on(\"add.kinetic\",function(a){b._addListeners(a.child),b._sync()})},getText:function(){return this.find(\"Text\")[0]},getTag:function(){return this.find(\"Tag\")[0]},_addListeners:function(c){var d,e=this,f=function(){e._sync()};for(d=0;i>d;d++)c.on(a[d]+b,f)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,c,h,i,j,k,l=this.getText(),m=this.getTag();if(l&&m){switch(a=l.getWidth(),b=l.getHeight(),c=m.getPointerDirection(),h=m.getPointerWidth(),k=m.getPointerHeight(),i=0,j=0,c){case d:i=a/2,j=-1*k;break;case e:i=a+h,j=b/2;break;case f:i=a/2,j=b+k;break;case g:i=-1*h,j=b/2}m.setAttrs({x:-1*i,y:-1*j,width:a,height:b}),l.setAttrs({x:-1*i,y:-1*j})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(a){this.___init(a)},Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=\"Tag\",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getWidth(),c=this.getHeight(),h=this.getPointerDirection(),i=this.getPointerWidth(),j=this.getPointerHeight(),k=this.getCornerRadius();a.beginPath(),a.moveTo(0,0),h===d&&(a.lineTo((b-i)/2,0),a.lineTo(b/2,-1*j),a.lineTo((b+i)/2,0)),k?(a.lineTo(b-k,0),a.arc(b-k,k,k,3*Math.PI/2,0,!1)):a.lineTo(b,0),h===e&&(a.lineTo(b,(c-j)/2),a.lineTo(b+i,c/2),a.lineTo(b,(c+j)/2)),k?(a.lineTo(b,c-k),a.arc(b-k,c-k,k,0,Math.PI/2,!1)):a.lineTo(b,c),h===f&&(a.lineTo((b+i)/2,c),a.lineTo(b/2,c+j),a.lineTo((b-i)/2,c)),k?(a.lineTo(k,c),a.arc(k,c-k,k,Math.PI/2,Math.PI,!1)):a.lineTo(0,c),h===g&&(a.lineTo(0,(c+j)/2),a.lineTo(-1*i,c/2),a.lineTo(0,(c-j)/2)),k&&(a.lineTo(0,k),a.arc(k,k,k,Math.PI,3*Math.PI/2,!1)),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,\"pointerDirection\",c),Kinetic.Factory.addGetterSetter(Kinetic.Tag,\"pointerWidth\",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,\"pointerHeight\",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,\"cornerRadius\",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),function(){Kinetic.Arrow=function(a){this.____init(a)},Kinetic.Arrow.prototype={____init:function(a){Kinetic.Line.call(this,a),this.className=\"Arrow\"},_sceneFunc:function(a){var b=2*Math.PI,c=this.points(),d=c.length,e=c[d-2]-c[d-4],f=c[d-1]-c[d-3],g=(Math.atan2(f,e)+b)%b,h=this.pointerLength(),i=this.pointerWidth();a.save(),a.beginPath(),a.translate(c[d-2],c[d-1]),a.rotate(g),a.moveTo(0,0),a.lineTo(-h,i/2),a.lineTo(-h,-i/2),a.closePath(),a.restore(),this.pointerAtBeginning()&&(a.save(),a.translate(c[0],c[1]),e=c[2]-c[0],f=c[3]-c[1],a.rotate((Math.atan2(-f,-e)+b)%b),a.moveTo(0,0),a.lineTo(-10,6),a.lineTo(-10,-6),a.closePath(),a.restore()),a.fillStrokeShape(this),Kinetic.Line.prototype._sceneFunc.apply(this,arguments)}},Kinetic.Util.extend(Kinetic.Arrow,Kinetic.Line),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,\"pointerLength\",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,\"pointerWidth\",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,\"pointerAtBeginning\",!1),Kinetic.Collection.mapMethods(Kinetic.Arrow)}();;/**\n     * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com\n     * Licensed under MIT\n     * @author Ariel Flesler\n     * @version 2.1.2\n     */\n    ;(function(f){\"use strict\";\"function\"===typeof define&&define.amd?define([\"jquery\"],f):\"undefined\"!==typeof module&&module.exports?module.exports=f(require(\"jquery\")):f(jQuery)})(function($){\"use strict\";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),[\"iframe\",\"#document\",\"html\",\"body\"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:\"xy\",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){\"object\"=== typeof d&&(b=d,d=0);\"function\"===typeof b&&(b={onAfter:b});\"max\"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case \"number\":case \"string\":if(/^([+-]=?)?\\d+(\\.\\d+)?(px|%)?$/.test(e)){e= h(e);break}e=l?$(e):$(e,q);case \"object\":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(\"\"),function(a,c){var d=\"x\"===c?\"Left\":\"Top\",m=d.toLowerCase(),g=\"scroll\"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css(\"margin\"+d),10)||0,f[g]-=parseInt(e.css(\"border\"+d+\"Width\"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e[\"x\"===c?\"width\":\"height\"]()*b.over[m])):(d=e[m],f[g]=d.slice&& \"%\"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b=\"x\"===d?\"Width\":\"Height\",h=\"scroll\"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b=\"client\"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()}, set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});\n\n}(jQuery));\n","import {\n  ProjectName,\n  waitForElement,\n} from 'core-app/core/setup/globals/onboarding/helpers';\nimport { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function boardTourSteps(edition:'basic'|'enterprise', project:ProjectName):OnboardingStep[] {\n  let boardName:string;\n  if (edition === 'basic') {\n    boardName = project === ProjectName.demo ? 'Basic board' : 'Task board';\n  } else {\n    boardName = 'Kanban';\n  }\n\n  const listExplanation = edition === 'basic' ? 'basic' : 'kanban';\n\n  return [\n    {\n      'next .board-view-menu-item': I18n.t('js.onboarding.steps.boards.overview'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('.board-view-menu-item ~ .toggler')[0].click();\n        waitForElement('.op-sidemenu--items', '#main-menu', () => {\n          jQuery(`.op-sidemenu--item-action:contains(${boardName})`)[0].click();\n        });\n      },\n    },\n    {\n      'next [data-qa-selector=\"op-board-list\"]': I18n.t(`js.onboarding.steps.boards.lists_${listExplanation}`),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n      timeout: () => new Promise((resolve) => {\n        waitForElement('.op-wp-single-card', '#content', () => {\n          resolve(undefined);\n        });\n      }),\n    },\n    {\n      'next [data-qa-selector=\"op-board-list--card-dropdown-add-button\"]': I18n.t('js.onboarding.steps.boards.add'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      condition: () => document.getElementsByClassName('op-board-list--add-button').length !== 0,\n    },\n    {\n      'next .boards-list--container': I18n.t('js.onboarding.steps.boards.drag'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n      onNext() {\n        const backArrows = Array.from(document.getElementsByClassName('main-menu--arrow-left-to-project'));\n        const boardsBackArrow = backArrows.find((backArrow) => (backArrow.nextElementSibling as HTMLElement).innerText === 'Boards') as HTMLElement;\n\n        if (boardsBackArrow) {\n          boardsBackArrow.click();\n        }\n      },\n    },\n  ];\n}\n","import { wpOnboardingTourSteps } from 'core-app/core/setup/globals/onboarding/tours/work_package_tour';\nimport {\n  demoProjectsLinks,\n  OnboardingTourNames,\n  onboardingTourStorageKey,\n  preventClickHandler,\n  ProjectName,\n  waitForElement,\n} from 'core-app/core/setup/globals/onboarding/helpers';\nimport { boardTourSteps } from 'core-app/core/setup/globals/onboarding/tours/boards_tour';\nimport { menuTourSteps } from 'core-app/core/setup/globals/onboarding/tours/menu_tour';\nimport { homescreenOnboardingTourSteps } from 'core-app/core/setup/globals/onboarding/tours/homescreen_tour';\nimport {\n  prepareScrumBacklogsTourSteps,\n  scrumBacklogsTourSteps,\n  scrumTaskBoardTourSteps,\n} from 'core-app/core/setup/globals/onboarding/tours/backlogs_tour';\nimport { teamPlannerTourSteps } from 'core-app/core/setup/globals/onboarding/tours/team_planners_tour';\n\nrequire('core-vendor/enjoyhint');\n\ndeclare global {\n  interface Window {\n    EnjoyHint:any;\n  }\n}\n\nexport type OnboardingStep = {\n  [key:string]:string|unknown,\n  event?:string,\n  description?:string,\n  selector?:string,\n  showSkip?:boolean,\n  skipButton?:{ className:string, text:string },\n  nextButton?:{ text:string },\n  containerClass?:string,\n  clickable?:boolean,\n  timeout?:() => Promise<void>,\n  condition?:() => boolean,\n  onNext?:() => void,\n  onBeforeStart?:() => void,\n};\n\nfunction initializeTour(storageValue:string, disabledElements?:string, projectSelection?:boolean) {\n  window.onboardingTourInstance = new window.EnjoyHint({\n    onStart() {\n      jQuery('#content-wrapper, #menu-sidebar').addClass('-hidden-overflow');\n    },\n    onEnd() {\n      sessionStorage.setItem(onboardingTourStorageKey, storageValue);\n      jQuery('#content-wrapper, #menu-sidebar').removeClass('-hidden-overflow');\n    },\n    onSkip() {\n      sessionStorage.setItem(onboardingTourStorageKey, 'skipped');\n      if (disabledElements) {\n        jQuery(disabledElements).removeClass('-disabled').unbind('click', preventClickHandler);\n      }\n      if (projectSelection) {\n        jQuery.each(demoProjectsLinks(), (i, e) => {\n          jQuery(e).off('click');\n        });\n      }\n      jQuery('#content-wrapper, #menu-sidebar').removeClass('-hidden-overflow');\n    },\n  });\n}\n\nfunction startTour(steps:OnboardingStep[]) {\n  window.onboardingTourInstance.set(steps);\n  window.onboardingTourInstance.run();\n}\n\nfunction moduleVisible(name:string):boolean {\n  return document.getElementsByClassName(`${name}-view-menu-item`).length > 0;\n}\n\nfunction mainTour(project:ProjectName = ProjectName.demo) {\n  initializeTour('mainTourFinished');\n\n  const boardsDemoDataAvailable = jQuery('meta[name=boards_demo_data_available]').attr('content') === 'true';\n  const teamPlannerDemoDataAvailable = jQuery('meta[name=demo_view_of_type_team_planner_seeded]').attr('content') === 'true';\n  const eeTokenAvailable = !jQuery('body').hasClass('ee-banners-visible');\n\n  waitForElement('.work-package--results-tbody', '#content', () => {\n    let steps:OnboardingStep[] = wpOnboardingTourSteps();\n\n    // Check for EE edition\n    if (eeTokenAvailable) {\n      // ... and available seed data of boards.\n      // Then add boards to the tour, otherwise skip it.\n      if (boardsDemoDataAvailable && moduleVisible('board')) {\n        steps = steps.concat(boardTourSteps('enterprise', project));\n      }\n\n      // ... same for team planners\n      if (teamPlannerDemoDataAvailable && moduleVisible('team-planner')) {\n        steps = steps.concat(teamPlannerTourSteps());\n      }\n    } else if (boardsDemoDataAvailable && moduleVisible('board')) {\n      steps = steps.concat(boardTourSteps('basic', project));\n    }\n\n    steps = steps.concat(menuTourSteps());\n\n    startTour(steps);\n  });\n}\n\nexport function start(name:OnboardingTourNames, project?:ProjectName):void {\n  switch (name) {\n    case 'prepareBacklogs':\n      initializeTour('prepareTaskBoardTour');\n      startTour(prepareScrumBacklogsTourSteps());\n      break;\n    case 'backlogs':\n      initializeTour('startTaskBoardTour');\n      startTour(scrumBacklogsTourSteps());\n      break;\n    case 'taskboard':\n      initializeTour('startMainTourFromBacklogs');\n      startTour(scrumTaskBoardTourSteps());\n      break;\n    case 'homescreen':\n      initializeTour('startProjectTour', '.widget-box--blocks--buttons a', true);\n      startTour(homescreenOnboardingTourSteps());\n      break;\n    case 'main':\n      mainTour(project);\n      break;\n    default:\n      break;\n  }\n}\n","import { waitForElement } from 'core-app/core/setup/globals/onboarding/helpers';\nimport { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function wpOnboardingTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next .wp-table--row': I18n.t('js.onboarding.steps.wp.list'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('.inline-edit--display-field.id a ')[0].click();\n      },\n    },\n    {\n      'next .work-packages-full-view--split-left': I18n.t('js.onboarding.steps.wp.full_view'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n    },\n    {\n      'next .work-packages-back-button': I18n.t('js.onboarding.steps.wp.back_button'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('.work-packages-back-button')[0].click();\n      },\n    },\n    {\n      'next .add-work-package': I18n.t('js.onboarding.steps.wp.create_button'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      shape: 'circle',\n      timeout: () => new Promise((resolve) => {\n        // We are waiting here for the badge to appear,\n        // because its the last that appears and it shifts the WP create button to the left.\n        // Thus it is important that the tour rendering starts after the badge is visible\n        waitForElement('#work-packages-filter-toggle-button .badge', '#content', () => {\n          resolve(undefined);\n        });\n      }),\n      onNext() {\n        jQuery('#wp-view-toggle-button').click();\n      },\n    },\n    {\n      'next #wp-view-toggle-button': I18n.t('js.onboarding.steps.wp.timeline_button'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      bottom: '-64',\n      onNext() {\n        jQuery('#wp-view-context-menu .icon-view-timeline')[0].click();\n      },\n    },\n    {\n      'next .work-packages-tabletimeline--timeline-side': I18n.t('js.onboarding.steps.wp.timeline'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n    },\n    {\n      'next .main-menu--arrow-left-to-project': I18n.t('js.onboarding.steps.sidebar_arrow'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('.main-menu--arrow-left-to-project')[0].click();\n      },\n    },\n  ];\n}\n","import { waitForElement } from 'core-app/core/setup/globals/onboarding/helpers';\nimport { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function teamPlannerTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next .team-planner-view-menu-item': I18n.t('js.onboarding.steps.team_planner.overview'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('.team-planner-view-menu-item ~ .toggler')[0].click();\n        waitForElement('.op-sidemenu--items', '#main-menu', () => {\n          jQuery(\".op-sidemenu--item-action:contains('Team planner')\")[0].click();\n        });\n      },\n    },\n    {\n      'next [data-qa-selector=\"op-team-planner--calendar-pane\"]': I18n.t('js.onboarding.steps.team_planner.calendar'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n      timeout: () => new Promise((resolve) => {\n        waitForElement('.op-wp-single-card', '#content', () => {\n          resolve(undefined);\n        });\n      }),\n    },\n    {\n      'next [data-qa-selector=\"tp-assignee-add-button\"]': I18n.t('js.onboarding.steps.team_planner.add_assignee'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n    },\n    {\n      'next [data-qa-selector=\"op-team-planner--add-existing-toggle\"]': I18n.t('js.onboarding.steps.team_planner.add_existing'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n    },\n    {\n      'next [data-qa-selector=\"op-wp-single-card\"]': I18n.t('js.onboarding.steps.team_planner.card'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        const teamPlannerBackArrow = document.querySelector('li[data-name=\"team_planner_view\"] .main-menu--arrow-left-to-project') as HTMLElement|undefined;\n\n        if (teamPlannerBackArrow) {\n          teamPlannerBackArrow.click();\n        }\n      },\n    },\n  ];\n}\n","import { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function menuTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next .members-menu-item': I18n.t('js.onboarding.steps.members'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      condition: () => document.getElementsByClassName('members-menu-item').length !== 0,\n    },\n    {\n      'next .wiki-menu--main-item': I18n.t('js.onboarding.steps.wiki'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      condition: () => document.getElementsByClassName('wiki-menu--main-item').length !== 0,\n    },\n    {\n      'next .op-quick-add-menu': I18n.t('js.onboarding.steps.quick_add_button'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      condition: () => document.getElementsByClassName('op-quick-add-menu--icon').length !== 0,\n    },\n    {\n      'next .op-app-help': I18n.t('js.onboarding.steps.help_menu'),\n      shape: 'circle',\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.got_it') },\n    },\n  ];\n}\n","import { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function prepareScrumBacklogsTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next .backlogs-menu-item': I18n.t('js.onboarding.steps.backlogs.overview'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n      onNext() {\n        jQuery('.backlogs-menu-item')[0].click();\n      },\n    },\n  ];\n}\n\nexport function scrumBacklogsTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next #content-wrapper': I18n.t('js.onboarding.steps.backlogs.sprints'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n    },\n    {\n      event_type: 'next',\n      selector: '#sprint_backlogs_container .backlog .menu-trigger',\n      description: I18n.t('js.onboarding.steps.backlogs.task_board_arrow'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('#sprint_backlogs_container .backlog .menu-trigger')[0].click();\n      },\n    },\n    {\n      event_type: 'next',\n      selector: '#sprint_backlogs_container .backlog .menu .items',\n      description: I18n.t('js.onboarding.steps.backlogs.task_board_select'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark',\n      onNext() {\n        jQuery('#sprint_backlogs_container .backlog .show_task_board')[0].click();\n      },\n    },\n  ];\n}\n\nexport function scrumTaskBoardTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next #content-wrapper': I18n.t('js.onboarding.steps.backlogs.task_board'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-dark -hidden-arrow',\n      condition: () => document.getElementsByClassName('backlogs-menu-item').length !== 0,\n    },\n    {\n      'next #main-menu-work-packages-wrapper': I18n.t('js.onboarding.steps.wp.toggler'),\n      showSkip: false,\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      onNext() {\n        jQuery('#main-menu-work-packages')[0].click();\n      },\n    },\n  ];\n}\n","import {\n  demoProjectName,\n  preventClickHandler,\n  scrumDemoProjectName,\n} from 'core-app/core/setup/globals/onboarding/helpers';\nimport { OnboardingStep } from 'core-app/core/setup/globals/onboarding/onboarding_tour';\n\nexport function homescreenOnboardingTourSteps():OnboardingStep[] {\n  return [\n    {\n      'next .op-app-header': I18n.t('js.onboarding.steps.welcome'),\n      skipButton: { className: 'enjoyhint_btn-transparent', text: I18n.t('js.onboarding.buttons.skip') },\n      nextButton: { text: I18n.t('js.onboarding.buttons.next') },\n      containerClass: '-hidden-arrow',\n      bottom: 7,\n    },\n    {\n      description: I18n.t('js.onboarding.steps.project_selection'),\n      selector: '.widget-box.welcome',\n      event: 'custom',\n      showSkip: false,\n      containerClass: '-dark -hidden-arrow',\n      clickable: true,\n      onBeforeStart() {\n        // Handle the correct project selection and redirection\n        // This will be removed once the project selection is implemented\n        jQuery(`.widget-box.welcome a:contains(${scrumDemoProjectName})`).click(function (this:HTMLAnchorElement) {\n          window.onboardingTourInstance.trigger('next');\n          window.location.href = `${this.href}/?start_scrum_onboarding_tour=true`;\n        });\n        jQuery(`.widget-box.welcome a:contains(${demoProjectName})`).click(function (this:HTMLAnchorElement) {\n          window.onboardingTourInstance.trigger('next');\n          window.location.href = `${this.href}/work_packages/?start_onboarding_tour=true`;\n        });\n        // Disable clicks on other links\n        jQuery('.widget-box.welcome a').addClass('-disabled').bind('click', preventClickHandler);\n      },\n    },\n  ];\n}\n"],"sourceRoot":"webpack:///","file":"src_app_core_setup_globals_onboarding_onboarding_tour_ts.4c7ded7c00a27e74a0ae.js"}