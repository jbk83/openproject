(self.webpackChunkopenproject_frontend=self.webpackChunkopenproject_frontend||[]).push([[3108],{83108:()=>{!function(F,e){e(function(){if(0!==e("#custom_field_form").length){var a=e("#custom_field_field_format"),o=e("#custom_field_length"),n=e("#custom_field_regexp"),c=e("#custom_field_multi_select"),i=e("#custom_field_possible_values_attributes"),u=e("#custom_field_default_value_attributes"),p=e("#default_value_text"),x=e("#default_value_long_text"),y=e("#default_value_bool"),v=e("#custom_field_text_orientation"),r=function(l){l.hide().find("input, textarea").not(".destroy_flag,.-cf-ignore-disabled").attr("disabled",!0)},s=function(l){l.show().find("input, textarea").not(".destroy_flag,.-cf-ignore-disabled").removeAttr("disabled")},S=function(l,f){var C=Array.prototype.slice.call(f);e.each(C,function(T,V){V.closest(".form--field, .form--grouping")[l]()})},m=function(){S("hide",arguments)},d=function(){S("show",arguments)},O=function(){var l=e("#searchable_container"),f=function(){l.attr("checked",!1).hide()};switch(e.each([y,x,p,c,v],function(C,T){r(T)}),s(u),s(p),a.val()){case"list":r(u),m(o,n,u),d(l,c),s(c),s(i);break;case"bool":s(y),r(p),r(i),m(o,n,l),f();break;case"date":r(u),r(i),m(o,n,u),f();break;case"float":case"int":r(i),d(o,n),f();break;case"user":d(c),s(c);case"version":r(u),r(i),m(o,n,u),f();break;case"text":s(x),r(p),d(o,n,l,v),r(i),s(v);break;default:d(o,n,l),r(i)}};a.on("change",O).trigger("change"),O()}}),e(function(){e(".locale_selector").change(function(){var a=e(this).val();e(this).closest(".translation").attr("lang",a)}).trigger("change")});var _=function(){var t=e(this).closest("tr");return t.prev("tr").before(t),!1},h=function(){var t=e(this).closest("tr");return t.next("tr").after(t),!1},g=function(){var t=e(this).closest("tr");return jQuery(t.siblings()[0]).before(t),!1},b=function(){var t=e(this).closest("tr");return jQuery(t.siblings().last()[0]).after(t),!1},k=function(){var t=e(this);if("#"===t.attr("href")||t.attr("href").endsWith("/0")){var a=t.closest("tr");return a.siblings().length>1&&a.remove(),!1}return!0},j=function(){var t=e("#custom-options-table tr.custom-option-row").length,a=e("#custom-options-table tr.custom-option-row:last"),o=a.clone(),n=o.find(".custom-option-value input");n.attr("name","custom_field[custom_options_attributes]["+t+"][value]"),n.attr("id","custom_field_custom_options_attributes_"+t+"_value"),n.val("");var c=o.find(".custom-option-default-value"),i=c.find('input[type="checkbox"]');return c.find('input[type="hidden"]').attr("name","custom_field[custom_options_attributes]["+t+"][default_value]"),i.attr("name","custom_field[custom_options_attributes]["+t+"][default_value]"),i.attr("id","custom_field_custom_options_attributes_"+t+"_default_value]"),i.prop("checked",!1),o.find(".custom-option-id").remove(),o.find(".move-up-custom-option").click(_),o.find(".sort-up-custom-option").click(g),o.find(".sort-down-custom-option").click(b),o.find(".move-down-custom-option").click(h),o.find(".custom-option-default-value").change(w),o.find(".delete-custom-option").attr("href","#").click(k),a.after(o),!1},w=function(){var t=e(this);t.prop("checked")&&(e("#custom_field_multi_value").prop("checked")||(e(".custom-option-default-value").each(function(o,n){e(n).prop("checked",!1)}),t.prop("checked",!0)))},D=function(){e(this).prop("checked")||e(".custom-option-default-value:checked").slice(1).each(function(a,o){e(o).prop("checked",!1)})};e(document).ready(function(){e("#add-custom-option").click(j),e(".delete-custom-option").click(k),e(".move-up-custom-option").click(_),e(".move-down-custom-option").click(h),e(".sort-up-custom-option").click(g),e(".sort-down-custom-option").click(b),e(".custom-option-default-value").change(w),e("#custom_field_multi_value").change(D);const t=document.getElementById("custom-field-dragula-container"),a=dragula([t],{isContainer:function(o){return!1},moves:function(o,n,c,i){return e(c).hasClass("dragula-handle")},accepts:function(o,n,c,i){return!0},invalid:function(o,n){return!1},direction:"vertical",copy:!1,copySortSource:!1,revertOnSpill:!0,removeOnSpill:!1,mirrorContainer:t,ignoreInputTextSelection:!0});F.OpenProject.getPluginContext().then(o=>{new o.classes.DomAutoscrollService([document.getElementById("content-wrapper")],{margin:25,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){return a.dragging}})})})}(window,jQuery)}}]);