{"version":3,"mappings":"gKA4BA,aACA,2CAGA,oBACAA,yCACA,eACAA,OAEAA,EAGA,cACAA,wBAGA,cACAA,2BAGA,aACA,+DACAC,6DACAC,UACAC,yDAGAF,4DACAG,UACAD,oDACAE,IACAF,gEAIA,aACAA,mDACAA,sDACAD,cACAC,uDACAF,6DACAE,iDAEAA,wDAGA,GAFAA,sCAEAG,aACAH,4DAEAA,6DAKA,aACAA,kDACAA,qCACAA,iDAGAA,mCAEA,8DACAC,eAGAF,cAEAD,8DAIAD,yCAKAA,gDACA,cACA,2CACA,IAIAA,iCAGAA,uCAGA,wCACAO,IAGAJ,6DACAI","names":["e","window","t","jQuery","o","l","indexOf","i"],"sources":["./src/app/core/augmenting/dynamic-scripts/members_form.js"],"sourcesContent":["//-- copyright\n// OpenProject is an open source project management software.\n// Copyright (C) 2012-2022 the OpenProject GmbH\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License version 3.\n//\n// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:\n// Copyright (C) 2006-2013 Jean-Philippe Lang\n// Copyright (C) 2010-2013 the ChiliProject Team\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// See COPYRIGHT and LICENSE files for more details.\n//++\n\nfunction findFilter() {\n  var filter =  jQuery('.simple-filters--container');\n\n  // Find the filter elements on the page\n  if(filter.length === 0)\n    filter = jQuery('.advanced-filters--container');\n  else if(filter.length === 0)\n    filter = nil;\n\n  return filter;\n}\n\nfunction hideFilter(filter) {\n  filter.addClass('collapsed');\n}\n\nfunction showFilter(filter) {\n  filter.removeClass('collapsed');\n}\n\nfunction toggleMemberFilter() {\n  if (window.OpenProject.guardedLocalStorage(\"showFilter\") === \"true\") {\n    window.OpenProject.guardedLocalStorage(\"showFilter\", 'false');\n    hideFilter(filter);\n    jQuery('#filter-member-button').removeClass('-active');\n  }\n  else {\n    window.OpenProject.guardedLocalStorage(\"showFilter\", 'true');\n    showFilter(filter);\n    jQuery('#filter-member-button').addClass('-active');\n    hideAddMemberForm();\n    jQuery('.simple-filters--filter:first-of-type select').focus();\n  }\n}\n\nfunction showAddMemberForm() {\n  jQuery('#members_add_form').css('display', 'block');\n  jQuery('#members_add_form #principal_search').focus();\n  hideFilter(filter = findFilter());\n  jQuery('#filter-member-button').removeClass('-active');\n  window.OpenProject.guardedLocalStorage(\"showFilter\", 'false');\n  jQuery('#add-member-button').prop('disabled', true);\n\n  jQuery(\"input#member_user_ids\").on(\"change\", function() {\n    var values = jQuery(\"input#member_user_ids\").val();\n\n    if (values.indexOf(\"@\") != -1) {\n      jQuery(\"#member-user-limit-warning\").css(\"display\", \"block\");\n    } else {\n      jQuery(\"#member-user-limit-warning\").css(\"display\", \"none\");\n    }\n  });\n}\n\nfunction hideAddMemberForm() {\n  jQuery('#members_add_form').css('display', 'none');\n  jQuery('#add-member-button').focus();\n  jQuery('#add-member-button').prop('disabled', false);\n}\n\njQuery(document).ready(function($) {\n  // Show/Hide content when page is loaded\n  if (window.OpenProject.guardedLocalStorage(\"showFilter\") === \"true\") {\n    showFilter(filter = findFilter());\n  }\n  else {\n    hideFilter(filter = findFilter());\n    // In case showFilter is not set yet\n    window.OpenProject.guardedLocalStorage(\"showFilter\", 'false');\n  }\n\n  // Toggle filter\n  $('.toggle-member-filter-link').click(toggleMemberFilter);\n\n\n\n  // Toggle editing row\n  $('.toggle-membership-button').click(function() {\n    var el = $(this);\n    $(el.data('toggleTarget')).toggle();\n    return false;\n  });\n\n  // Show add member form\n  $('#add-member-button').click(showAddMemberForm);\n\n  // Hide member form\n  $('.hide-member-form-button').click(hideAddMemberForm);\n\n  // show member form only when there's an error\n  if (jQuery(\"#errorExplanation\").text() != \"\") {\n    showAddMemberForm();\n  }\n\n  if (jQuery('#add-member-button').attr('data-trigger-initially')) {\n    showAddMemberForm();\n  }\n});\n"],"sourceRoot":"webpack:///","file":"src_app_core_augmenting_dynamic-scripts_members_form_js.d8cf3f0d85b1d222afab.js"}