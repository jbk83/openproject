(self.webpackChunkopenproject_frontend=self.webpackChunkopenproject_frontend||[]).push([["src_app_core_errors_appsignal_appsignal-dependency_ts"],{30365:(O,P,p)=>{O.exports=self.fetch||(self.fetch=p(72054).default||p(72054))},72054:(O,P,p)=>{"use strict";function a(R,m){return m=m||{},new Promise(function(N,X){var c=new XMLHttpRequest,L=[],T=[],d={},H=function(){return{ok:2==(c.status/100|0),statusText:c.statusText,status:c.status,url:c.responseURL,text:function(){return Promise.resolve(c.responseText)},json:function(){return Promise.resolve(c.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([c.response]))},clone:H,headers:{keys:function(){return L},entries:function(){return T},get:function(E){return d[E.toLowerCase()]},has:function(E){return E.toLowerCase()in d}}}};for(var I in c.open(m.method||"get",R,!0),c.onload=function(){c.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(E,y,w){L.push(y=y.toLowerCase()),T.push([y,w]),d[y]=d[y]?d[y]+","+w:w}),N(H())},c.onerror=X,c.withCredentials="include"==m.credentials,m.headers)c.setRequestHeader(I,m.headers[I]);c.send(m.body||null)})}p.r(P),p.d(P,{default:()=>a})},30835:(O,P,p)=>{"use strict";p.r(P),p.d(P,{Appsignal:()=>V,Span:()=>S,networkPlugin:()=>W});var a=p(3786);function R(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(r){return r}:1===e.length?e[0]:e.reduce(function(r,i){return function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return r(i.apply(void 0,(0,a.fl)(s)))}})}function N(e){if(e)return Object.keys(e).forEach(function(t){"string"==typeof e[t]||"boolean"==typeof e[t]||"number"==typeof e[t]||(e[t]=JSON.stringify(e[t]))}),e}function c(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]){var t=e.stacktrace;return(void 0===t?"":t).split("\n").filter(function(n){return""!==n})}if(e.stack){var i=e.stack;return(void 0===i?"":i).split("\n").filter(function(n){return""!==n})}return["No stacktrace available"]}function T(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function d(){return T()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}p(30365);var E=function(){function e(t){this._data=t}return e.prototype.toJSON=function(){return JSON.stringify(this._data)},e.prototype.serialize=function(){return this._data},e}(),w=function(){function e(){}return e.serialize=function(){return{transport:this.transport(),origin:this.origin()}},e.origin=function(){var t=d();return!t.navigator||"ReactNative"===t.navigator.product&&!t.location?"":t.location.origin||t.location.protocol+"//"+t.location.hostname},e.transport=function(){var t=d();return T()&&"undefined"==typeof jest?"NodeHTTP":t.XDomainRequest?"XDomainRequest":t.XMLHttpRequest&&!t.fetch?"XMLHttpRequest":"fetch"},e.supportsPromises=function(){var r,t=d();return"Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise(function(i){r=i}),"function"==typeof r)},e}(),C=function(){function e(t){this.url=t}return e.prototype.send=function(t){var r=this;return new Promise(function(i,s){var n,o=new XDomainRequest,u=new RegExp("^https?:");o.onload=function(){return i({})},o.open("POST",r.url.replace(u,null===(n=null==window?void 0:window.location)||void 0===n?void 0:n.protocol)),setTimeout(function(){try{o.send(t)}catch(l){s(l)}},0)})},e}(),x=function(){function e(t){this.url=t}return e.prototype.send=function(t){var r=this;return new Promise(function(i,s){try{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i({})},n.open("POST",r.url),n.send(t)}catch(o){s(o)}})},e}(),G=function(){function e(t,r){this.url=t}return e.prototype.send=function(t){return(0,a.mG)(this,void 0,void 0,function(){var r,i;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch(this.url,{method:"POST",body:t})];case 1:return r=n.sent(),i=r.statusText,[2,r.ok?Promise.resolve({}):Promise.reject({statusText:i})]}})})},e}(),M=p(10057),B=p.n(M),F=function(){function e(t){this.url=t}return e.prototype.send=function(t){var r=this,i={method:"POST",headers:{"Content-Type":"application/json","Content-Length":t.length}};return new Promise(function(s,n){var o=B().request(r.url,i,function(){}).on("error",function(u){return n(u)});o.write(t),o.end(),s({})})},e}(),J=function(){function e(t){this._uri=t.uri||"https://appsignal-endpoint.net/collect",this._apiKey=t.key,this._clientVersion=t.version,this._transport=this._createTransport(this._url())}return e.prototype.push=function(t){return(0,a.mG)(this,void 0,void 0,function(){return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,this._transport.send(t.toJSON())];case 1:return r.sent(),[2,t]}})})},e.prototype._createTransport=function(t){switch(w.transport()){case"XDomainRequest":return new C(t);case"XMLHttpRequest":return new x(t);case"NodeHTTP":return new F(t);default:return new G(t)}},e.prototype._url=function(){var t=this._authorization();return this._uri+"?"+function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}(t)},e.prototype._authorization=function(){return{api_key:this._apiKey,version:this._clientVersion}},e}(),S=function(e){function t(r){return e.call(this,(0,a.pi)({timestamp:Math.round((new Date).getTime()/1e3),namespace:"frontend",error:{name:"NullError",message:"No error has been set",backtrace:[]}},r))||this}return(0,a.ZT)(t,e),t.prototype.setAction=function(r){return r&&"string"==typeof r?(this._data.action=r,this):this},t.prototype.setNamespace=function(r){return r&&"string"==typeof r?(this._data.namespace=r,this):this},t.prototype.setError=function(r){return r&&function(e){return void 0!==e.message&&(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]||void 0!==e.stack)}(r)?(this._data.error={name:r.name||"[unknown]",message:r.message,backtrace:c(r)},this):this},t.prototype.setTags=function(r){return this._data.tags=(0,a.pi)((0,a.pi)({},this._data.tags),function(e){if(e)return Object.keys(e).forEach(function(t){"object"==typeof e[t]&&(e[t]=JSON.stringify(e[t])),e[t]=String(e[t])}),e}(r)),this},t.prototype.setParams=function(r){return this._data.params=(0,a.pi)((0,a.pi)({},this._data.params),r),this},t.prototype.setBreadcrumbs=function(r){return this._data.breadcrumbs=r,this},t}(E),U=function(){function e(t){this._data=t||[]}return e.prototype.clear=function(){this._data=[]},e.prototype.values=function(){return this._data},e.prototype.push=function(t){var r;return Array.isArray(t)?(r=this._data).push.apply(r,(0,a.fl)(t)):this._data.push(t)},e.prototype.drain=function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return this._data.length>0?[4,this._data.shift()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})},e}(),z=function(){function e(t,r,i){this._retries=0,this._timerID=0,this._duration=0,this._api=r,this._queue=t,this.options=(0,a.pi)({limit:5,initialDuration:1e3},i),this.reset()}return e.prototype.schedule=function(t){var r=this;void 0===t&&(t=this._duration);var i=d();return i.setTimeout(function(){return(0,a.mG)(r,void 0,void 0,function(){var o,u,l,b,A,f,g;return(0,a.Jh)(this,function(h){switch(h.label){case 0:h.trys.push([0,7,8,9]),o=(0,a.XA)(this._queue.drain()),u=o.next(),h.label=1;case 1:if(u.done)return[3,6];if(!(l=u.value))return[2];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this._api.push(l)];case 3:return h.sent(),[3,5];case 4:return h.sent(),b=Math.floor(Math.pow(t,1.3)),this._retries=this._retries-1,0===this._retries?this.reset():(this._queue.push(l),this._timerID=this.schedule(b)),[2];case 5:return u=o.next(),[3,1];case 6:return[3,9];case 7:return A=h.sent(),f={error:A},[3,9];case 8:try{u&&!u.done&&(g=o.return)&&g.call(o)}finally{if(f)throw f.error}return[7];case 9:return this.reset(),[2]}})})},t)},e.prototype.reset=function(){var t=this.options,r=t.limit,i=t.initialDuration;this._retries=r,this._duration=i},e}();const V=function(){function e(t){this.VERSION="1.3.22",this.ignored=[],this._breadcrumbs=[],this._hooks={decorators:Array(),overrides:Array()},this._env=w.serialize(),this._queue=new U([]);var r=t.key,i=void 0===r?"":r,s=t.uri,n=t.revision,o=t.ignoreErrors;n&&"string"!=typeof n&&(t.revision=String(n)),""===i&&console.info("[APPSIGNAL]: Started in development mode."),this._api=new J({key:i,uri:s,version:this.VERSION}),o&&Array.isArray(o)&&(this.ignored=o),this._dispatcher=new z(this._queue,this._api),this._options=t}return e.prototype.send=function(t,r,i){var s=this;if(t instanceof Error||t instanceof S){if(0!==this.ignored.length){if(t instanceof Error&&this.ignored.some(function(_){return _.test(t.message)}))return void console.warn("[APPSIGNAL]: Ignored an error: "+t.message);if(t instanceof S){var n=t.serialize().error;if(n.message&&this.ignored.some(function(_){return _.test(n.message)}))return void console.warn("[APPSIGNAL]: Ignored a span: "+n.message)}}var o=t instanceof S?t:this._createSpanFromError(t);if(this._hooks.decorators.length>0&&R.apply(void 0,(0,a.fl)(this._hooks.decorators))(o),r)if("function"==typeof r){r(o)}else{console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a tags object is deprecated. Use the callback argument instead.");var l=N(r)||{};o.setTags(l)}if(i&&(console.warn("[APPSIGNAL]: DEPRECATED: Calling the `send`/`sendError` function with a namespace is deprecated. Use the callback argument instead."),o.setNamespace(i)),this._breadcrumbs.length>0&&o.setBreadcrumbs(this._breadcrumbs),this._hooks.overrides.length>0&&R.apply(void 0,(0,a.fl)(this._hooks.overrides))(o),w.supportsPromises()){if(this._breadcrumbs=[],this._options.key)return this._api.push(o).catch(function(){s._queue.push(o),setTimeout(function(){return s._dispatcher.schedule()},0)});if(console.warn("[APPSIGNAL]: Span not sent because we're in development mode:",o),t instanceof Error)throw t}else console.error("[APPSIGNAL]: Error not sent. A Promise polyfill is required.")}else console.error("[APPSIGNAL]: Can't send error, given error is not a valid type")},e.prototype.sendError=function(t,r,i){return this.send(t,r,i)},e.prototype.use=function(t){t.call(this)},e.prototype.createSpan=function(t){var r=this._options,i=r.revision,s=void 0===i?"":i,n=r.namespace,o=new S({environment:this._env,revision:s});return n&&o.setNamespace(n),t&&"function"==typeof t&&t(o),o},e.prototype.wrap=function(t,r,i){return(0,a.mG)(this,void 0,void 0,function(){var s;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,t()];case 1:return[2,n.sent()];case 2:return s=n.sent(),[4,this.sendError(s,r,i)];case 3:return n.sent(),[2,Promise.reject(s)];case 4:return[2]}})})},e.prototype.addDecorator=function(t){this._hooks.decorators.push(t)},e.prototype.addOverride=function(t){this._hooks.overrides.push(t)},e.prototype.demo=function(){var t=this._createSpanFromError(new Error("Hello world! This is an error used for demonstration purposes."));t.setAction("TestAction").setParams({path:"/hello",method:"GET"}).setTags({demo_sample:"true"}),this.send(t)},e.prototype.addBreadcrumb=function(t){var r=(0,a.pi)((0,a.pi)({timestamp:Math.round((new Date).getTime()/1e3)},t),{metadata:N(t.metadata)});r.category?r.action?(20===this._breadcrumbs.length&&this._breadcrumbs.pop(),this._breadcrumbs.unshift(r)):console.warn("[APPSIGNAL]: Breadcrumb not added. `action` is missing."):console.warn("[APPSIGNAL]: Breadcrumb not added. `category` is missing.")},e.prototype._createSpanFromError=function(t){var r=this.createSpan();return r.setError(t),r},e}();var k=function(){return(k=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},j={xhrEnabled:!0,fetchEnabled:!0,ignoreUrls:[]};var W=function(e){var t=k(k({},j),e),r=t.xhrEnabled,i=t.fetchEnabled,s=t.ignoreUrls,n=!!r&&"XMLHttpRequest"in window,o=!!i&&"fetch"in window;return function(){var b,u=this;n&&(b=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(f,g){var h={method:f,url:g};function q(){s.some(function(v){return v.test(g)})||u.addBreadcrumb({action:this.status>=400?"Request failed with code "+this.status:"Received a response with code "+this.status,category:"XMLHttpRequest",metadata:h})}function D(){s.some(function(v){return v.test(g)})||u.addBreadcrumb({action:"Request failed",category:"XMLHttpRequest",metadata:h})}this.addEventListener("load",q),this.addEventListener("error",D),b.apply(this,arguments)}),o&&function(){var b=window.fetch;window.fetch=function(f,g){var h="string"==typeof f?f:f.url,q="string"!=typeof f&&f.method||g&&g.method||"GET",D={method:q,url:h};return s.some(function(v){return v.test(h)})?b.apply(window,arguments):b.apply(window,arguments).then(function(v){var Z=v.status;return u.addBreadcrumb({action:"Received a response with code "+Z,category:"Fetch",metadata:D}),v}).catch(function(v){throw u.addBreadcrumb({action:"Request failed",category:"Fetch",metadata:D}),v})}}()}}},10057:()=>{}}]);
//# sourceMappingURL=src_app_core_errors_appsignal_appsignal-dependency_ts.eaec6cb590faffd96617.js.map