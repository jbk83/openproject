{"version":3,"mappings":"yKAiECA,OArCD,WAEAA,0DACA,gDAKA,aAJAC,4CAIAC,6EACA,2CACAC,qCACAA,sBACAC,uCAYA,WACA,6DACA,qCAEAC,kBACAC,kDAKAC,GAjBA,WACA,gDACAD,SACAA,UAeAE","names":["jQuery","getElementById","dataset","t","window","has","e","o","c"],"sources":["./src/app/core/augmenting/dynamic-scripts/project_form_listener.js"],"sourcesContent":["//-- copyright\n// OpenProject is an open source project management software.\n// Copyright (C) 2012-2022 the OpenProject GmbH\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License version 3.\n//\n// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:\n// Copyright (C) 2006-2013 Jean-Philippe Lang\n// Copyright (C) 2010-2013 the ChiliProject Team\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// See COPYRIGHT and LICENSE files for more details.\n//++\n(function($) {\n  $(function() {\n    function observeTemplateChanges() {\n      jQuery('#project-select-template').on('change', function() {\n        const name = document.getElementById('project_name');\n        const fieldset = document.getElementById('advanced-project-settings');\n\n        // When the advanced settings were opened once, we assume they were changed\n        // and show an alert before switching the template\n        if (!fieldset.dataset.touched || window.confirm(I18n.t('js.project.confirm_template_load'))) {\n          let params = new URLSearchParams(location.search);\n          params.set('template_project', this.value);\n          params.set('name', name.value);\n          window.location.search = params.toString();\n        }\n      });\n    }\n\n    function focusOnName() {\n      const name = document.getElementById('project_name');\n      if (!name.value) {\n        name.focus();\n      }\n    }\n\n    function expandAdvancedOnParams() {\n      const fieldset = document.getElementById('advanced-project-settings');\n      let params = new URLSearchParams(location.search);\n\n      if (params.has('parent_id')) {\n        fieldset.querySelector('.form--fieldset-legend').click();\n      }\n    }\n\n    observeTemplateChanges();\n    expandAdvancedOnParams();\n    focusOnName();\n  });\n}(jQuery));\n"],"sourceRoot":"webpack:///","file":"src_app_core_augmenting_dynamic-scripts_project_form_listener_js.168fda325eab47b98219.js"}