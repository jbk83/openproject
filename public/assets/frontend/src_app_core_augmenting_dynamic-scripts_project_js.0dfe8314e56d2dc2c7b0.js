(self.webpackChunkopenproject_frontend=self.webpackChunkopenproject_frontend||[]).push([["src_app_core_augmenting_dynamic-scripts_project_js"],{98798:()=>{jQuery(function(e){let r=e("form.project-filters").first(),o=e("#projects-filter-toggle-button"),f=["*","!*","t","w"],c=["list","list_all","list_optional"],d=e("#projects-filter-close-button");function u(){o.hasClass("-active")?(o.removeClass("-active"),r.removeClass("-expanded")):(o.addClass("-active"),r.addClass("-expanded"))}function h(){let l=e(".advanced-filters--filter:not(.hidden)",r),t=[];return l.each(function(a,i){let s=e(i),n=s.attr("filter-name"),v=e('select[name="operator"]',s).val(),m=function(l,t){let a=l.attr("filter-type"),i=e(".advanced-filters--filter-value",l),s=e('input[type="checkbox"]',i)[0];if(s)return[s.checked?"t":"f"];if(f.includes(t))return[];if(c.includes(a))return function(l){let t;t=l.hasClass("multi-value")?'.multi-select select[name="value[]"]':'.single-select select[name="value"]';let a=e(t,l).val();if(a=_.flatten([a]),a.length>0)return a}(i);if(["datetime_past","date"].includes(a))return function(l){let t;if(l.hasClass("days"))t=_.without([e('.days input[name="value"]',l).val()],"");else if(l.hasClass("on-date"))t=_.without([e('.on-date input[name="value"]',l).val()],"");else if(l.hasClass("between-dates")){t=[e('.between-dates input[name="from_value"]',l).val(),e('.between-dates input[name="to_value"]',l).val()]}if(t.length>0)return t}(i);let n=e('input[name="value"]',i).val();if(n.length>0)return[n]}(s,v);if(m){let g={};g[n]={operator:v,values:m},t.push(g)}}),t}function p(){let l=e(".advanced-filters--filter:not(.hidden)").length;e(".advanced-filters--spacer").toggle(l>0)}e(".advanced-filters--filter-value a.multi-select-toggle").click(function(){let t=e(this).parents(".advanced-filters--filter-value"),a=e(".single-select select",t),i=e(".multi-select select",t);if(t.hasClass("multi-value")){let s=i.val(),n=null;n=s&&s.length>1?s[0]:s,a.val(n)}else{let s=a.val();i.val(s)}return t.toggleClass("multi-value"),!1}),o.click(u),d.click(u),r.submit(function(){e("#ajax-indicator").show();let l=h(),t=function(l){var i,s,a=decodeURIComponent(window.location.search.substring(1)).split("&");for(s=0;s<a.length;s++)if((i=a[s].split("="))[0]===l)return void 0===i[1]||i[1]}("sortBy"),a="?filters="+encodeURIComponent(JSON.stringify(l));return t&&t.length>0&&(a=a+"&sortBy="+encodeURIComponent(t)),window.location=window.location.pathname+a,!1}),e('select[name="operator"]',r).on("change",function(){selectedOperator=e(this).val(),$filter=e(this).parents(".advanced-filters--filter"),$filterValue=e(".advanced-filters--filter-value",$filter),["*","!*","t","w"].includes(selectedOperator)?$filterValue.addClass("hidden"):$filterValue.removeClass("hidden"),[">t-","<t-","t-","<t+",">t+","t+"].includes(selectedOperator)?($filterValue.addClass("days"),$filterValue.removeClass("on-date"),$filterValue.removeClass("between-dates")):"=d"==selectedOperator?($filterValue.addClass("on-date"),$filterValue.removeClass("days"),$filterValue.removeClass("between-dates")):"<>d"==selectedOperator&&($filterValue.addClass("between-dates"),$filterValue.removeClass("days"),$filterValue.removeClass("on-date"))}),e("#add_filter_select",r).on("change",function(l){return l.preventDefault(),e('[filter-name="'+e(this).val()+'"]').removeClass("hidden"),e("#add_filter_select option:selected",r).prop("disabled","disabled"),jQuery("#add_filter_select option:first-of-type").prop("selected","selected"),p(),!1}),e(".filter_rem",r).on("click",function(l){l.preventDefault();let t=e(this).parents(".advanced-filters--filter"),a=t.attr("filter-name");t.addClass("hidden"),e('#add_filter_select option[value="'+a+'"]',r).removeAttr("disabled"),p()})}),function(e){function r(){let o=e(this),f=o.siblings(".projects-table--description-toggle"),c=o.closest(".project"),d=c.next();return c.toggleClass("-no-highlighting"),c.toggleClass("-expanded"),d.toggleClass("-expanded"),d.hasClass("-expanded")?e(d).attr("aria-live","polite"):e(d).removeAttr("aria-live"),f.focus(),!1}e("document").ready(function(){e(".projects-table--description-toggle").click(r)})}(jQuery)}}]);
//# sourceMappingURL=src_app_core_augmenting_dynamic-scripts_project_js.0dfe8314e56d2dc2c7b0.js.map